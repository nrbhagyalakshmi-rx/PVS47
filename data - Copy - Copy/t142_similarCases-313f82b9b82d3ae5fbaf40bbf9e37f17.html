var signal=signal||{};
signal.similarCaseTable=function(){var c,h=function(a){$(".event-outcome-pie").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},credits:{enabled:!1},title:{text:"Cases By Event Outcome"},credits:{enabled:!1},tooltip:{formatter:function(){return""+this.y+" cases"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[{name:"Cases",colorByPoint:!0,innerSize:"40%",data:a}]})},k=function(){var a=$(".event-outcome-pie").highcharts();
"undefined"!=typeof a&&null!=a&&a.destroy()},l=function(a){switch(a){case "Serious":a="Y";break;case "Non Serious":a="N";break;case "Unknown":a="U";break;default:a="-"}return a},m=function(a){switch(a){case "Listed":a="N";break;case "Unlisted":a="Y";break;case "Unknown":a="U";break;default:a="-"}return a},n=function(a){switch(a){case "1":a="Y";break;case "0":a="N";break;default:a="-"}return a};return{init_similar_case_table:function(a){"undefined"!=typeof c&&null!=c&&c.destroy();k();a=a+"?caseNumber="+
$("#caseNumberInfo").val()+"&currentVersion="+$("#caseCurrentVersion").val()+"&eventVal="+$("#eventCodeVal").val()+"&eventType="+$("#eventCode").val()+"&executedConfigId="+$("#similarCaseModal").find("#executedConfigId").val();return c=$("#similarCaseModalTable").DataTable({language:{url:"../assets/i18n/dataTables_"+userLocale+".json"},ajax:{url:a,dataSrc:""},searching:!0,bLengthChange:!0,iDisplayLength:10,aLengthMenu:[[10,20,50,-1],[10,20,50,"All"]],aoColumns:[{mData:"",mRender:function(a,d,b){return'<a target="_blank" href="'+
(caseDetailUrl+"?"+signal.utils.composeParams({caseNumber:b.caseNumber,version:b.caseVersion,followUpNumber:null,alertId:b.alertId}))+"\"><span data-field ='caseNumber' data-id='"+b.caseNumber+"'>"+b.caseNumber+"</span><span data-field ='caseVersion' data-id='"+b.caseVersion+"'></span>(<span data-field ='followUpNumber' data-id='"+b.followUpNumber+"'>"+b.followUpNumber+"</span>)</a>"},className:"dt-center"},{mData:"productName",className:"dt-center"},{mData:"pt",className:"dt-center"},{mData:"hcp",
mRender:function(a,d,b){a="";1==b.hcp?a="Yes":0==b.hcp&&(a="No");return"<span>"+a+"</span>"},className:"dt-center"},{mData:"",mRender:function(a,d,b){return signal.utils.stacked(l(b.seriousness)+"/"+m(b.listedness)+"/"+n(b.determinedCausality),b.outcome?b.outcome:"-")},className:"dt-center"},{mData:"disposition",className:"dt-center"},{mData:"priority",className:"dt-center"},{mData:"assignedTo",className:"dt-center"}],fnInitComplete:function(a,d){if(1<d.length){a={};for(var b=[],c=0;c<d.length;c++){var f=
d[c].outcome,g=a[f];a[f]="undefined"!=typeof g?g+1:1}for(var e in a)"null"!=e?b.push({name:e,y:a[e]}):b.push({name:"Unknown",y:a[e]});0<b.length&&h(b)}},columnDefs:[{targets:"_all",render:$.fn.dataTable.render.text()}]})}}}();