<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="34">
  <HTTPTask id="345" hostname="10.100.22.24:8181" path="/signal/assets/vendorUi/datatables/dataTables.fixedColumns.min-acc90a700b69150380759567188a8cd0.js" url="http://10.100.22.24:8181/signal/assets/vendorUi/datatables/dataTables.fixedColumns.min-acc90a700b69150380759567188a8cd0.js" ip="10.100.22.24" port="8181" connectionId="16" origin="Primary" frame="1" startDateTime="2020-05-22T11:18:57.132+05:30" startTime="89276546" endTime="89277375">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTAuMTAwLjIyLjI0OjgxODE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzgxLjAuNDA0NC4xMzggU2FmYXJpLzUzNy4zNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovLzEwLjEwMC4yMi4yNDo4MTgxL3NpZ25hbC8=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U0VTU0lPTj04ZmE2YTc5MS0zOTFlLTRkNDItYjAzNi0xYzUwNjdhYzZkOGU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9zaWduYWwvYXNzZXRzL3ZlbmRvclVpL2RhdGF0YWJsZXMvZGF0YVRhYmxlcy5maXhlZENvbHVtbnMubWluLWFjYzkwYTcwMGI2OTE1MDM4MDc1OTU2NzE4OGE4Y2QwLmpzIEhUVFAvMS4xDQpIb3N0OiAxMC4xMDAuMjIuMjQ6ODE4MQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzgxLjAuNDA0NC4xMzggU2FmYXJpLzUzNy4zNg0KQWNjZXB0OiAqLyoNClJlZmVyZXI6IGh0dHA6Ly8xMC4xMDAuMjIuMjQ6ODE4MS9zaWduYWwvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkNvb2tpZTogU0VTU0lPTj04ZmE2YTc5MS0zOTFlLTRkNDItYjAzNi0xYzUwNjdhYzZkOGUNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="SESSION" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>OGZhNmE3OTEtMzkxZS00ZDQyLWIwMzYtMWM1MDY3YWM2ZDhl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>12852</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Last-Modified" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAyMSBNYXkgMjAyMCAwODoxOTowMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>InZlbmRvclVpL2RhdGF0YWJsZXMvZGF0YVRhYmxlcy5maXhlZENvbHVtbnMubWluLWFjYzkwYTcwMGI2OTE1MDM4MDc1OTU2NzE4OGE4Y2QwLmpzIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTI4NTI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAyMiBNYXkgMjAyMCAwNTozODoyMiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVGh1LCAyMSBNYXkgMjAyMCAwODoxOTowMCBHTVQNCkVUYWc6ICJ2ZW5kb3JVaS9kYXRhdGFibGVzL2RhdGFUYWJsZXMuZml4ZWRDb2x1bW5zLm1pbi1hY2M5MGE3MDBiNjkxNTAzODA3NTk1NjcxODhhOGNkMC5qcyINClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KQ2FjaGUtQ29udHJvbDogcHVibGljLCBtYXgtYWdlPTMxNTM2MDAwDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7Y2hhcnNldD1VVEYtOA0KQ29udGVudC1MZW5ndGg6IDEyODUyDQpEYXRlOiBGcmksIDIyIE1heSAyMDIwIDA1OjM4OjIyIEdNVA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyohIEZpeGVkQ29sdW1ucyAzLjIuMy1kZXYNCiAqIMKpMjAxMC0yMDE2IFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlDQogKi8NCg0KLyoqDQogKiBAc3VtbWFyeSAgICAgRml4ZWRDb2x1bW5zDQogKiBAZGVzY3JpcHRpb24gRnJlZXplIGNvbHVtbnMgaW4gcGxhY2Ugb24gYSBzY3JvbGxpbmcgRGF0YVRhYmxlDQogKiBAdmVyc2lvbiAgICAgMy4yLjMtZGV2DQogKiBAZmlsZSAgICAgICAgZGF0YVRhYmxlcy5maXhlZENvbHVtbnMuanMNCiAqIEBhdXRob3IgICAgICBTcHJ5TWVkaWEgTHRkICh3d3cuc3ByeW1lZGlhLmNvLnVrKQ0KICogQGNvbnRhY3QgICAgIHd3dy5zcHJ5bWVkaWEuY28udWsvY29udGFjdA0KICogQGNvcHlyaWdodCAgIENvcHlyaWdodCAyMDEwLTIwMTYgU3ByeU1lZGlhIEx0ZC4NCiAqDQogKiBUaGlzIHNvdXJjZSBmaWxlIGlzIGZyZWUgc29mdHdhcmUsIGF2YWlsYWJsZSB1bmRlciB0aGUgZm9sbG93aW5nIGxpY2Vuc2U6DQogKiAgIE1JVCBsaWNlbnNlIC0gaHR0cDovL2RhdGF0YWJsZXMubmV0L2xpY2Vuc2UvbWl0DQogKg0KICogVGhpcyBzb3VyY2UgZmlsZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQNCiAqIFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZDQogKiBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZSBsaWNlbnNlIGZpbGVzIGZvciBkZXRhaWxzLg0KICoNCiAqIEZvciBkZXRhaWxzIHBsZWFzZSByZWZlciB0bzogaHR0cDovL3d3dy5kYXRhdGFibGVzLm5ldA0KICovDQooZnVuY3Rpb24oIGZhY3RvcnkgKXsNCiAgICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHsNCiAgICAgICAgLy8gQU1EDQogICAgICAgIGRlZmluZSggWydqcXVlcnknLCAnZGF0YXRhYmxlcy5uZXQnXSwgZnVuY3Rpb24gKCAkICkgew0KICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkoICQsIHdpbmRvdywgZG9jdW1lbnQgKTsNCiAgICAgICAgfSApOw0KICAgIH0NCiAgICBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICkgew0KICAgICAgICAvLyBDb21tb25KUw0KICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChyb290LCAkKSB7DQogICAgICAgICAgICBpZiAoICEgcm9vdCApIHsNCiAgICAgICAgICAgICAgICByb290ID0gd2luZG93Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoICEgJCB8fCAhICQuZm4uZGF0YVRhYmxlICkgew0KICAgICAgICAgICAgICAgICQgPSByZXF1aXJlKCdkYXRhdGFibGVzLm5ldCcpKHJvb3QsICQpLiQ7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KCAkLCByb290LCByb290LmRvY3VtZW50ICk7DQogICAgICAgIH07DQogICAgfQ0KICAgIGVsc2Ugew0KICAgICAgICAvLyBCcm93c2VyDQogICAgICAgIGZhY3RvcnkoIGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCApOw0KICAgIH0NCn0oZnVuY3Rpb24oICQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCApIHsNCiAgICAndXNlIHN0cmljdCc7DQogICAgdmFyIERhdGFUYWJsZSA9ICQuZm4uZGF0YVRhYmxlOw0KICAgIHZhciBfZmlyZWZveFNjcm9sbDsNCg0KICAgIC8qKg0KICAgICAqIFdoZW4gbWFraW5nIHVzZSBvZiBEYXRhVGFibGVzJyB4LWF4aXMgc2Nyb2xsaW5nIGZlYXR1cmUsIHlvdSBtYXkgd2lzaCB0bw0KICAgICAqIGZpeCB0aGUgbGVmdCBtb3N0IGNvbHVtbiBpbiBwbGFjZS4gVGhpcyBwbHVnLWluIGZvciBEYXRhVGFibGVzIHByb3ZpZGVzDQogICAgICogZXhhY3RseSB0aGlzIG9wdGlvbiAobm90ZSBmb3Igbm9uLXNjcm9sbGluZyB0YWJsZXMsIHBsZWFzZSB1c2UgdGhlDQogICAgICogRml4ZWRIZWFkZXIgcGx1Zy1pbiwgd2hpY2ggY2FuIGZpeCBoZWFkZXJzIGFuZCBmb290ZXJzKS4gS2V5DQogICAgICogZmVhdHVyZXMgaW5jbHVkZToNCiAgICAgKg0KICAgICAqICogRnJlZXplcyB0aGUgbGVmdCBvciByaWdodCBtb3N0IGNvbHVtbnMgdG8gdGhlIHNpZGUgb2YgdGhlIHRhYmxlDQogICAgICogKiBPcHRpb24gdG8gZnJlZXplIHR3byBvciBtb3JlIGNvbHVtbnMNCiAgICAgKiAqIEZ1bGwgaW50ZWdyYXRpb24gd2l0aCBEYXRhVGFibGVzJyBzY3JvbGxpbmcgb3B0aW9ucw0KICAgICAqICogU3BlZWQgLSBGaXhlZENvbHVtbnMgaXMgZmFzdCBpbiBpdHMgb3BlcmF0aW9uDQogICAgICoNCiAgICAgKiAgQGNsYXNzDQogICAgICogIEBjb25zdHJ1Y3Rvcg0KICAgICAqICBAZ2xvYmFsDQogICAgICogIEBwYXJhbSB7b2JqZWN0fSBkdCBEYXRhVGFibGVzIGluc3RhbmNlLiBXaXRoIERhdGFUYWJsZXMgMS4xMCB0aGlzIGNhbiBhbHNvDQogICAgICogICAgYmUgYSBqUXVlcnkgY29sbGVjdGlvbiwgYSBqUXVlcnkgc2VsZWN0b3IsIERhdGFUYWJsZXMgQVBJIGluc3RhbmNlIG9yDQogICAgICogICAgc2V0dGluZ3Mgb2JqZWN0Lg0KICAgICAqICBAcGFyYW0ge29iamVjdH0gW2luaXQ9e31dIENvbmZpZ3VyYXRpb24gb2JqZWN0IGZvciBGaXhlZENvbHVtbnMuIE9wdGlvbnMgYXJlDQogICAgICogICAgZGVmaW5lZCBieSB7QGxpbmsgRml4ZWRDb2x1bW5zLmRlZmF1bHRzfQ0KICAgICAqDQogICAgICogIEByZXF1aXJlcyBqUXVlcnkgMS43Kw0KICAgICAqICBAcmVxdWlyZXMgRGF0YVRhYmxlcyAxLjguMCsNCiAgICAgKg0KICAgICAqICBAZXhhbXBsZQ0KICAgICAqICAgICAgdmFyIHRhYmxlID0gJCgnI2V4YW1wbGUnKS5kYXRhVGFibGUoIHsNCiAqICAgICAgICAic2Nyb2xsWCI6ICIxMDAlIg0KICogICAgICB9ICk7DQogICAgICogICAgICBuZXcgJC5mbi5kYXRhVGFibGUuZml4ZWRDb2x1bW5zKCB0YWJsZSApOw0KICAgICAqLw0KICAgIHZhciBGaXhlZENvbHVtbnMgPSBmdW5jdGlvbiAoIGR0LCBpbml0ICkgew0KICAgICAgICB2YXIgdGhhdCA9IHRoaXM7DQoNCiAgICAgICAgLyogU2FuaXR5IGNoZWNrIC0geW91IGp1c3Qga25vdyBpdCB3aWxsIGhhcHBlbiAqLw0KICAgICAgICBpZiAoICEgKCB0aGlzIGluc3RhbmNlb2YgRml4ZWRDb2x1bW5zICkgKSB7DQogICAgICAgICAgICBhbGVydCggIkZpeGVkQ29sdW1ucyB3YXJuaW5nOiBGaXhlZENvbHVtbnMgbXVzdCBiZSBpbml0aWFsaXNlZCB3aXRoIHRoZSAnbmV3JyBrZXl3b3JkLiIgKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICggaW5pdCA9PT0gdW5kZWZpbmVkIHx8IGluaXQgPT09IHRydWUgKSB7DQogICAgICAgICAgICBpbml0ID0ge307DQogICAgICAgIH0NCg0KICAgICAgICAvLyBVc2UgdGhlIERhdGFUYWJsZXMgSHVuZ2FyaWFuIG5vdGF0aW9uIG1hcHBpbmcgbWV0aG9kLCBpZiBpdCBleGlzdHMgdG8NCiAgICAgICAgLy8gcHJvdmlkZSBmb3J3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBjYW1lbCBjYXNlIHZhcmlhYmxlcw0KICAgICAgICB2YXIgY2FtZWxUb0h1bmdhcmlhbiA9ICQuZm4uZGF0YVRhYmxlLmNhbWVsVG9IdW5nYXJpYW47DQogICAgICAgIGlmICggY2FtZWxUb0h1bmdhcmlhbiApIHsNCiAgICAgICAgICAgIGNhbWVsVG9IdW5nYXJpYW4oIEZpeGVkQ29sdW1ucy5kZWZhdWx0cywgRml4ZWRDb2x1bW5zLmRlZmF1bHRzLCB0cnVlICk7DQogICAgICAgICAgICBjYW1lbFRvSHVuZ2FyaWFuKCBGaXhlZENvbHVtbnMuZGVmYXVsdHMsIGluaXQgKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIHYxLjEwIGFsbG93cyB0aGUgc2V0dGluZ3Mgb2JqZWN0IHRvIGJlIGdvdCBmb3JtIGEgbnVtYmVyIG9mIHNvdXJjZXMNCiAgICAgICAgdmFyIGR0U2V0dGluZ3MgPSBuZXcgJC5mbi5kYXRhVGFibGUuQXBpKCBkdCApLnNldHRpbmdzKClbMF07DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFNldHRpbmdzIG9iamVjdCB3aGljaCBjb250YWlucyBjdXN0b21pc2FibGUgaW5mb3JtYXRpb24gZm9yIEZpeGVkQ29sdW1ucyBpbnN0YW5jZQ0KICAgICAgICAgKiBAbmFtZXNwYWNlDQogICAgICAgICAqIEBleHRlbmRzIEZpeGVkQ29sdW1ucy5kZWZhdWx0cw0KICAgICAgICAgKiBAcHJpdmF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy5zID0gew0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBEYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdHMNCiAgICAgICAgICAgICAqICBAdHlwZSAgICAgb2JqZWN0DQogICAgICAgICAgICAgKiAgQGRlZmF1bHQgIE9idGFpbmVkIGZyb20gRGF0YVRhYmxlcyBpbnN0YW5jZQ0KICAgICAgICAgICAgICovDQogICAgICAgICAgICAiZHQiOiBkdFNldHRpbmdzLA0KDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIE51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBEYXRhVGFibGUgLSBzdG9yZWQgZm9yIHF1aWNrIGFjY2Vzcw0KICAgICAgICAgICAgICogIEB0eXBlICAgICBpbnQNCiAgICAgICAgICAgICAqICBAZGVmYXVsdCAgT2J0YWluZWQgZnJvbSBEYXRhVGFibGVzIGluc3RhbmNlDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICJpVGFibGVDb2x1bW5zIjogZHRTZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoLA0KDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIE9yaWdpbmFsIG91dGVyIHdpZHRocyBvZiB0aGUgY29sdW1ucyBhcyByZW5kZXJlZCBieSBEYXRhVGFibGVzIC0gdXNlZCB0byBjYWxjdWxhdGUNCiAgICAgICAgICAgICAqIHRoZSBGaXhlZENvbHVtbnMgZ3JpZCBib3VuZGluZyBib3gNCiAgICAgICAgICAgICAqICBAdHlwZSAgICAgYXJyYXkuPGludD4NCiAgICAgICAgICAgICAqICBAZGVmYXVsdCAgW10NCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgImFpT3V0ZXJXaWR0aHMiOiBbXSwNCg0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBPcmlnaW5hbCBpbm5lciB3aWR0aHMgb2YgdGhlIGNvbHVtbnMgYXMgcmVuZGVyZWQgYnkgRGF0YVRhYmxlcyAtIHVzZWQgdG8gYXBwbHkgd2lkdGhzDQogICAgICAgICAgICAgKiB0byB0aGUgY29sdW1ucw0KICAgICAgICAgICAgICogIEB0eXBlICAgICBhcnJheS48aW50Pg0KICAgICAgICAgICAgICogIEBkZWZhdWx0ICBbXQ0KICAgICAgICAgICAgICovDQogICAgICAgICAgICAiYWlJbm5lcldpZHRocyI6IFtdLA0KDQoNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICogSXMgdGhlIGRvY3VtZW50IGxheW91dCByaWdodC10by1sZWZ0DQogICAgICAgICAgICAgKiBAdHlwZSBib29sZWFuDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIHJ0bDogJChkdFNldHRpbmdzLm5UYWJsZSkuY3NzKCdkaXJlY3Rpb24nKSA9PT0gJ3J0bCcNCiAgICAgICAgfTsNCg0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBET00gZWxlbWVudHMgdXNlZCBieSB0aGUgY2xhc3MgaW5zdGFuY2UNCiAgICAgICAgICogQG5hbWVzcGFjZQ0KICAgICAgICAgKiBAcHJpdmF0ZQ0KICAgICAgICAgKg0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy5kb20gPSB7DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIERhdGFUYWJsZXMgc2Nyb2xsaW5nIGVsZW1lbnQNCiAgICAgICAgICAgICAqICBAdHlwZSAgICAgbm9kZQ0KICAgICAgICAgICAgICogIEBkZWZhdWx0ICBudWxsDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICJzY3JvbGxlciI6IG51bGwsDQoNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICogRGF0YVRhYmxlcyBoZWFkZXIgdGFibGUNCiAgICAgICAgICAgICAqICBAdHlwZSAgICAgbm9kZQ0KICAgICAgICAgICAgICogIEBkZWZhdWx0ICBudWxsDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICJoZWFkZXIiOiBudWxsLA0KDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIERhdGFUYWJsZXMgYm9keSB0YWJsZQ0KICAgICAgICAgICAgICogIEB0eXBlICAgICBub2RlDQogICAgICAgICAgICAgKiAgQGRlZmF1bHQgIG51bGwNCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgImJvZHkiOiBudWxsLA0KDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIERhdGFUYWJsZXMgZm9vdGVyIHRhYmxlDQogICAgICAgICAgICAgKiAgQHR5cGUgICAgIG5vZGUNCiAgICAgICAgICAgICAqICBAZGVmYXVsdCAgbnVsbA0KICAgICAgICAgICAgICovDQogICAgICAgICAgICAiZm9vdGVyIjogbnVsbCwNCg0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBEaXNwbGF5IGdyaWQgZWxlbWVudHMNCiAgICAgICAgICAgICAqIEBuYW1lc3BhY2UNCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgImdyaWQiOiB7DQogICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICogR3JpZCB3cmFwcGVyLiBUaGlzIGlzIHRoZSBjb250YWluZXIgZWxlbWVudCBmb3IgdGhlIDN4MyBncmlkDQogICAgICAgICAgICAgICAgICogIEB0eXBlICAgICBub2RlDQogICAgICAgICAgICAgICAgICogIEBkZWZhdWx0ICBudWxsDQogICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgIndyYXBwZXIiOiBudWxsLA0KDQogICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICogRGF0YVRhYmxlcyBzY3JvbGxpbmcgZWxlbWVudC4gVGhpcyBlbGVtZW50IGlzIHRoZSBEYXRhVGFibGVzDQogICAgICAgICAgICAgICAgICogY29tcG9uZW50IGluIHRoZSBkaXNwbGF5IGdyaWQgKG1ha2luZyB1cCB0aGUgbWFpbiB0YWJsZSAtIGkuZS4NCiAgICAgICAgICAgICAgICAgKiBub3QgdGhlIGZpeGVkIGNvbHVtbnMpLg0KICAgICAgICAgICAgICAgICAqICBAdHlwZSAgICAgbm9kZQ0KICAgICAgICAgICAgICAgICAqICBAZGVmYXVsdCAgbnVsbA0KICAgICAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgICAgICJkdCI6IG51bGwsDQoNCiAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgKiBMZWZ0IGZpeGVkIGNvbHVtbiBncmlkIGNvbXBvbmVudHMNCiAgICAgICAgICAgICAgICAgKiBAbmFtZXNwYWNlDQogICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgImxlZnQiOiB7DQogICAgICAgICAgICAgICAgICAgICJ3cmFwcGVyIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgImhlYWQiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiYm9keSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJmb290IjogbnVsbA0KICAgICAgICAgICAgICAgIH0sDQoNCiAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgKiBSaWdodCBmaXhlZCBjb2x1bW4gZ3JpZCBjb21wb25lbnRzDQogICAgICAgICAgICAgICAgICogQG5hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgICAgICJyaWdodCI6IHsNCiAgICAgICAgICAgICAgICAgICAgIndyYXBwZXIiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiaGVhZCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJib2R5IjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgImZvb3QiOiBudWxsDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCg0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBDbG9uZWQgdGFibGUgbm9kZXMNCiAgICAgICAgICAgICAqIEBuYW1lc3BhY2UNCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgImNsb25lIjogew0KICAgICAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICAgICAqIExlZnQgY29sdW1uIGNsb25lZCB0YWJsZSBub2Rlcw0KICAgICAgICAgICAgICAgICAqIEBuYW1lc3BhY2UNCiAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICAibGVmdCI6IHsNCiAgICAgICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICAgICAqIENsb25lZCBoZWFkZXIgdGFibGUNCiAgICAgICAgICAgICAgICAgICAgICogIEB0eXBlICAgICBub2RlDQogICAgICAgICAgICAgICAgICAgICAqICBAZGVmYXVsdCAgbnVsbA0KICAgICAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICAgICAgImhlYWRlciI6IG51bGwsDQoNCiAgICAgICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICAgICAqIENsb25lZCBib2R5IHRhYmxlDQogICAgICAgICAgICAgICAgICAgICAqICBAdHlwZSAgICAgbm9kZQ0KICAgICAgICAgICAgICAgICAgICAgKiAgQGRlZmF1bHQgIG51bGwNCiAgICAgICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgICAgICJib2R5IjogbnVsbCwNCg0KICAgICAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgICAgICogQ2xvbmVkIGZvb3RlciB0YWJsZQ0KICAgICAgICAgICAgICAgICAgICAgKiAgQHR5cGUgICAgIG5vZGUNCiAgICAgICAgICAgICAgICAgICAgICogIEBkZWZhdWx0ICBudWxsDQogICAgICAgICAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgICAgICAgICAiZm9vdGVyIjogbnVsbA0KICAgICAgICAgICAgICAgIH0sDQoNCiAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgKiBSaWdodCBjb2x1bW4gY2xvbmVkIHRhYmxlIG5vZGVzDQogICAgICAgICAgICAgICAgICogQG5hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgICAgICJyaWdodCI6IHsNCiAgICAgICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICAgICAqIENsb25lZCBoZWFkZXIgdGFibGUNCiAgICAgICAgICAgICAgICAgICAgICogIEB0eXBlICAgICBub2RlDQogICAgICAgICAgICAgICAgICAgICAqICBAZGVmYXVsdCAgbnVsbA0KICAgICAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICAgICAgImhlYWRlciI6IG51bGwsDQoNCiAgICAgICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICAgICAqIENsb25lZCBib2R5IHRhYmxlDQogICAgICAgICAgICAgICAgICAgICAqICBAdHlwZSAgICAgbm9kZQ0KICAgICAgICAgICAgICAgICAgICAgKiAgQGRlZmF1bHQgIG51bGwNCiAgICAgICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgICAgICJib2R5IjogbnVsbCwNCg0KICAgICAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgICAgICogQ2xvbmVkIGZvb3RlciB0YWJsZQ0KICAgICAgICAgICAgICAgICAgICAgKiAgQHR5cGUgICAgIG5vZGUNCiAgICAgICAgICAgICAgICAgICAgICogIEBkZWZhdWx0ICBudWxsDQogICAgICAgICAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgICAgICAgICAiZm9vdGVyIjogbnVsbA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBpZiAoIGR0U2V0dGluZ3MuX29GaXhlZENvbHVtbnMgKSB7DQogICAgICAgICAgICB0aHJvdyAnRml4ZWRDb2x1bW5zIGFscmVhZHkgaW5pdGlhbGlzZWQgb24gdGhpcyB0YWJsZSc7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBBdHRhY2ggdGhlIGluc3RhbmNlIHRvIHRoZSBEYXRhVGFibGVzIGluc3RhbmNlIHNvIGl0IGNhbiBiZSBhY2Nlc3NlZCBlYXNpbHkgKi8NCiAgICAgICAgZHRTZXR0aW5ncy5fb0ZpeGVkQ29sdW1ucyA9IHRoaXM7DQoNCiAgICAgICAgLyogTGV0J3MgZG8gaXQgKi8NCiAgICAgICAgaWYgKCAhIGR0U2V0dGluZ3MuX2JJbml0Q29tcGxldGUgKQ0KICAgICAgICB7DQogICAgICAgICAgICBkdFNldHRpbmdzLm9BcGkuX2ZuQ2FsbGJhY2tSZWcoIGR0U2V0dGluZ3MsICdhb0luaXRDb21wbGV0ZScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICB0aGF0Ll9mbkNvbnN0cnVjdCggaW5pdCApOw0KICAgICAgICAgICAgfSwgJ0ZpeGVkQ29sdW1ucycgKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuX2ZuQ29uc3RydWN0KCBpbml0ICk7DQogICAgICAgIH0NCiAgICB9Ow0KDQoNCg0KICAgICQuZXh0ZW5kKCBGaXhlZENvbHVtbnMucHJvdG90eXBlICwgew0KICAgICAgICAvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgICAqIFB1YmxpYyBtZXRob2RzDQogICAgICAgICAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFVwZGF0ZSB0aGUgZml4ZWQgY29sdW1ucyAtIGluY2x1ZGluZyBoZWFkZXJzIGFuZCBmb290ZXJzLiBOb3RlIHRoYXQgRml4ZWRDb2x1bW5zIHdpbGwNCiAgICAgICAgICogYXV0b21hdGljYWxseSB1cGRhdGUgdGhlIGRpc3BsYXkgd2hlbmV2ZXIgdGhlIGhvc3QgRGF0YVRhYmxlIHJlZHJhd3MuDQogICAgICAgICAqICBAcmV0dXJucyB7dm9pZH0NCiAgICAgICAgICogIEBleGFtcGxlDQogICAgICAgICAqICAgICAgdmFyIHRhYmxlID0gJCgnI2V4YW1wbGUnKS5kYXRhVGFibGUoIHsNCgkgKiAgICAgICAgICAic2Nyb2xsWCI6ICIxMDAlIg0KCSAqICAgICAgfSApOw0KICAgICAgICAgKiAgICAgIHZhciBmYyA9IG5ldyAkLmZuLmRhdGFUYWJsZS5maXhlZENvbHVtbnMoIHRhYmxlICk7DQogICAgICAgICAqDQogICAgICAgICAqICAgICAgLy8gYXQgc29tZSBsYXRlciBwb2ludCB3aGVuIHRoZSB0YWJsZSBoYXMgYmVlbiBtYW5pcHVsYXRlZC4uLi4NCiAgICAgICAgICogICAgICBmYy5mblVwZGF0ZSgpOw0KICAgICAgICAgKi8NCiAgICAgICAgImZuVXBkYXRlIjogZnVuY3Rpb24gKCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5fZm5EcmF3KCB0cnVlICk7DQogICAgICAgIH0sDQoNCg0KICAgICAgICAvKioNCiAgICAgICAgICogUmVjYWxjdWxhdGUgdGhlIHJlc2l6ZXMgb2YgdGhlIDN4MyBncmlkIHRoYXQgRml4ZWRDb2x1bW5zIHVzZXMgZm9yIGRpc3BsYXkgb2YgdGhlIHRhYmxlLg0KICAgICAgICAgKiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3UgdXBkYXRlIHRoZSB3aWR0aCBvZiB0aGUgdGFibGUgY29udGFpbmVyLiBOb3RlIHRoYXQgRml4ZWRDb2x1bW5zIHdpbGwNCiAgICAgICAgICogcGVyZm9ybSB0aGlzIGZ1bmN0aW9uIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGUgd2luZG93LnJlc2l6ZSBldmVudCBpcyBmaXJlZC4NCiAgICAgICAgICogIEByZXR1cm5zIHt2b2lkfQ0KICAgICAgICAgKiAgQGV4YW1wbGUNCiAgICAgICAgICogICAgICB2YXIgdGFibGUgPSAkKCcjZXhhbXBsZScpLmRhdGFUYWJsZSggew0KCSAqICAgICAgICAgICJzY3JvbGxYIjogIjEwMCUiDQoJICogICAgICB9ICk7DQogICAgICAgICAqICAgICAgdmFyIGZjID0gbmV3ICQuZm4uZGF0YVRhYmxlLmZpeGVkQ29sdW1ucyggdGFibGUgKTsNCiAgICAgICAgICoNCiAgICAgICAgICogICAgICAvLyBSZXNpemUgdGhlIHRhYmxlIGNvbnRhaW5lciBhbmQgdGhlbiBoYXZlIEZpeGVkQ29sdW1ucyBhZGp1c3QgaXRzIGxheW91dC4uLi4NCiAgICAgICAgICogICAgICAkKCcjY29udGVudCcpLndpZHRoKCAxMjAwICk7DQogICAgICAgICAqICAgICAgZmMuZm5SZWRyYXdMYXlvdXQoKTsNCiAgICAgICAgICovDQogICAgICAgICJmblJlZHJhd0xheW91dCI6IGZ1bmN0aW9uICgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuX2ZuQ29sQ2FsYygpOw0KICAgICAgICAgICAgdGhpcy5fZm5HcmlkTGF5b3V0KCk7DQogICAgICAgICAgICB0aGlzLmZuVXBkYXRlKCk7DQogICAgICAgIH0sDQoNCg0KICAgICAgICAvKioNCiAgICAgICAgICogTWFyayBhIHJvdyBzdWNoIHRoYXQgaXQncyBoZWlnaHQgc2hvdWxkIGJlIHJlY2FsY3VsYXRlZCB3aGVuIHVzaW5nICdzZW1pYXV0bycgcm93DQogICAgICAgICAqIGhlaWdodCBtYXRjaGluZy4gVGhpcyBmdW5jdGlvbiB3aWxsIGhhdmUgbm8gZWZmZWN0IHdoZW4gJ25vbmUnIG9yICdhdXRvJyByb3cgaGVpZ2h0DQogICAgICAgICAqIG1hdGNoaW5nIGlzIHVzZWQuDQogICAgICAgICAqICBAcGFyYW0gICB7Tm9kZX0gblRyIFRSIGVsZW1lbnQgdGhhdCBzaG91bGQgaGF2ZSBpdCdzIGhlaWdodCByZWNhbGN1bGF0ZWQNCiAgICAgICAgICogIEByZXR1cm5zIHt2b2lkfQ0KICAgICAgICAgKiAgQGV4YW1wbGUNCiAgICAgICAgICogICAgICB2YXIgdGFibGUgPSAkKCcjZXhhbXBsZScpLmRhdGFUYWJsZSggew0KCSAqICAgICAgICAgICJzY3JvbGxYIjogIjEwMCUiDQoJICogICAgICB9ICk7DQogICAgICAgICAqICAgICAgdmFyIGZjID0gbmV3ICQuZm4uZGF0YVRhYmxlLmZpeGVkQ29sdW1ucyggdGFibGUgKTsNCiAgICAgICAgICoNCiAgICAgICAgICogICAgICAvLyBtYW5pcHVsYXRlIHRoZSB0YWJsZSAtIG1hcmsgdGhlIHJvdyBhcyBuZWVkaW5nIGFuIHVwZGF0ZSB0aGVuIHVwZGF0ZSB0aGUgdGFibGUNCiAgICAgICAgICogICAgICAvLyB0aGlzIGFsbG93cyB0aGUgcmVkcmF3IHBlcmZvcm1lZCBieSBEYXRhVGFibGVzIGZuVXBkYXRlIHRvIHJlY2FsY3VsYXRlIHRoZSByb3cNCiAgICAgICAgICogICAgICAvLyBoZWlnaHQNCiAgICAgICAgICogICAgICBmYy5mblJlY2FsY3VsYXRlSGVpZ2h0KCk7DQogICAgICAgICAqICAgICAgdGFibGUuZm5VcGRhdGUoICQoJyNleGFtcGxlIHRib2R5IHRyOmVxKDApJylbMF0sIFsiaW5zZXJ0IGRhdGUiLCAxLCAyLCAzIC4uLiBdKTsNCiAgICAgICAgICovDQogICAgICAgICJmblJlY2FsY3VsYXRlSGVpZ2h0IjogZnVuY3Rpb24gKCBuVHIgKQ0KICAgICAgICB7DQogICAgICAgICAgICBkZWxldGUgblRyLl9EVFRDX2lIZWlnaHQ7DQogICAgICAgICAgICBuVHIuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOw0KICAgICAgICB9LA0KDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFNldCB0aGUgaGVpZ2h0IG9mIGEgZ2l2ZW4gcm93IC0gcHJvdmlkZXMgY3Jvc3MgYnJvd3NlciBjb21wYXRpYmlsaXR5DQogICAgICAgICAqICBAcGFyYW0gICB7Tm9kZX0gblRhcmdldCBUUiBlbGVtZW50IHRoYXQgc2hvdWxkIGhhdmUgaXQncyBoZWlnaHQgcmVjYWxjdWxhdGVkDQogICAgICAgICAqICBAcGFyYW0gICB7aW50fSBpSGVpZ2h0IEhlaWdodCBpbiBwaXhlbHMgdG8gc2V0DQogICAgICAgICAqICBAcmV0dXJucyB7dm9pZH0NCiAgICAgICAgICogIEBleGFtcGxlDQogICAgICAgICAqICAgICAgdmFyIHRhYmxlID0gJCgnI2V4YW1wbGUnKS5kYXRhVGFibGUoIHsNCgkgKiAgICAgICAgICAic2Nyb2xsWCI6ICIxMDAlIg0KCSAqICAgICAgfSApOw0KICAgICAgICAgKiAgICAgIHZhciBmYyA9IG5ldyAkLmZuLmRhdGFUYWJsZS5maXhlZENvbHVtbnMoIHRhYmxlICk7DQogICAgICAgICAqDQogICAgICAgICAqICAgICAgLy8gWW91IG1heSB3YW50IHRvIGRvIHRoaXMgYWZ0ZXIgbWFuaXB1bGF0aW5nIGEgcm93IGluIHRoZSBmaXhlZCBjb2x1bW4NCiAgICAgICAgICogICAgICBmYy5mblNldFJvd0hlaWdodCggJCgnI2V4YW1wbGUgdGJvZHkgdHI6ZXEoMCknKVswXSwgNTAgKTsNCiAgICAgICAgICovDQogICAgICAgICJmblNldFJvd0hlaWdodCI6IGZ1bmN0aW9uICggblRhcmdldCwgaUhlaWdodCApDQogICAgICAgIHsNCiAgICAgICAgICAgIG5UYXJnZXQuc3R5bGUuaGVpZ2h0ID0gaUhlaWdodCsicHgiOw0KICAgICAgICB9LA0KDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEdldCBkYXRhIGluZGV4IGluZm9ybWF0aW9uIGFib3V0IGEgcm93IG9yIGNlbGwgaW4gdGhlIHRhYmxlIGJvZHkuDQogICAgICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byBmbkdldFBvc2l0aW9uIGluIERhdGFUYWJsZXMsDQogICAgICAgICAqIHRha2luZyB0aGUgc2FtZSBwYXJhbWV0ZXIgKFRILCBURCBvciBUUiBub2RlKSBhbmQgcmV0dXJuaW5nIGV4YWN0bHkgdGhlDQogICAgICAgICAqIHRoZSBzYW1lIGluZm9ybWF0aW9uIChkYXRhIGluZGV4IGluZm9ybWF0aW9uKS4gVEhlIGRpZmZlcmVuY2UgYmV0d2Vlbg0KICAgICAgICAgKiB0aGUgdHdvIGlzIHRoYXQgdGhpcyBtZXRob2QgdGFrZXMgaW50byBhY2NvdW50IHRoZSBmaXhlZCBjb2x1bW5zIGluIHRoZQ0KICAgICAgICAgKiB0YWJsZSwgc28geW91IGNhbiBwYXNzIGluIG5vZGVzIGZyb20gdGhlIG1hc3RlciB0YWJsZSwgb3IgdGhlIGNsb25lZA0KICAgICAgICAgKiB0YWJsZXMgYW5kIGdldCB0aGUgaW5kZXggcG9zaXRpb24gZm9yIHRoZSBkYXRhIGluIHRoZSBtYWluIHRhYmxlLg0KICAgICAgICAgKiAgQHBhcmFtIHtub2RlfSBub2RlIFRSLCBUSCBvciBURCBlbGVtZW50IHRvIGdldCB0aGUgaW5mb3JtYXRpb24gYWJvdXQNCiAgICAgICAgICogIEByZXR1cm5zIHtpbnR9IElmIG5Ob2RlIGlzIGdpdmVuIGFzIGEgVFIsIHRoZW4gYSBzaW5nbGUgaW5kZXggaXMNCiAgICAgICAgICogICAgcmV0dXJuZWQsIG9yIGlmIGdpdmVuIGFzIGEgY2VsbCwgYW4gYXJyYXkgb2YgW3JvdyBpbmRleCwgY29sdW1uIGluZGV4DQogICAgICAgICAqICAgICh2aXNpYmxlKSwgY29sdW1uIGluZGV4IChhbGwpXSBpcyBnaXZlbi4NCiAgICAgICAgICovDQogICAgICAgICJmbkdldFBvc2l0aW9uIjogZnVuY3Rpb24gKCBub2RlICkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGlkeDsNCiAgICAgICAgICAgIHZhciBpbnN0ID0gdGhpcy5zLmR0Lm9JbnN0YW5jZTsNCg0KICAgICAgICAgICAgaWYgKCAhICQobm9kZSkucGFyZW50cygnLkRURkNfQ2xvbmVkJykubGVuZ3RoICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBOb3QgaW4gYSBjbG9uZWQgdGFibGUNCiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdC5mbkdldFBvc2l0aW9uKCBub2RlICk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gSXRzIGluIHRoZSBjbG9uZWQgdGFibGUsIHNvIG5lZWQgdG8gbG9vayB1cCBwb3NpdGlvbg0KICAgICAgICAgICAgICAgIGlmICggbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndHInICkgew0KICAgICAgICAgICAgICAgICAgICBpZHggPSAkKG5vZGUpLmluZGV4KCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnN0LmZuR2V0UG9zaXRpb24oICQoJ3RyJywgdGhpcy5zLmR0Lm5UQm9keSlbIGlkeCBdICk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBjb2xJZHggPSAkKG5vZGUpLmluZGV4KCk7DQogICAgICAgICAgICAgICAgICAgIGlkeCA9ICQobm9kZS5wYXJlbnROb2RlKS5pbmRleCgpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gaW5zdC5mbkdldFBvc2l0aW9uKCAkKCd0cicsIHRoaXMucy5kdC5uVEJvZHkpWyBpZHggXSApOw0KDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBbDQogICAgICAgICAgICAgICAgICAgICAgICByb3csDQogICAgICAgICAgICAgICAgICAgICAgICBjb2xJZHgsDQogICAgICAgICAgICAgICAgICAgICAgICBpbnN0Lm9BcGkuX2ZuVmlzaWJsZVRvQ29sdW1uSW5kZXgoIHRoaXMucy5kdCwgY29sSWR4ICkNCiAgICAgICAgICAgICAgICAgICAgXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCg0KDQogICAgICAgIC8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgICogUHJpdmF0ZSBtZXRob2RzICh0aGV5IGFyZSBvZiBjb3Vyc2UgcHVibGljIGluIEpTLCBidXQgcmVjb21tZW5kZWQgYXMgcHJpdmF0ZSkNCiAgICAgICAgICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8NCg0KICAgICAgICAvKioNCiAgICAgICAgICogSW5pdGlhbGlzYXRpb24gZm9yIEZpeGVkQ29sdW1ucw0KICAgICAgICAgKiAgQHBhcmFtICAge09iamVjdH0gb0luaXQgVXNlciBzZXR0aW5ncyBmb3IgaW5pdGlhbGlzYXRpb24NCiAgICAgICAgICogIEByZXR1cm5zIHt2b2lkfQ0KICAgICAgICAgKiAgQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgICJfZm5Db25zdHJ1Y3QiOiBmdW5jdGlvbiAoIG9Jbml0ICkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGksIGlMZW4sIGlXaWR0aCwNCiAgICAgICAgICAgICAgICB0aGF0ID0gdGhpczsNCg0KICAgICAgICAgICAgLyogU2FuaXR5IGNoZWNraW5nICovDQogICAgICAgICAgICBpZiAoIHR5cGVvZiB0aGlzLnMuZHQub0luc3RhbmNlLmZuVmVyc2lvbkNoZWNrICE9ICdmdW5jdGlvbicgfHwNCiAgICAgICAgICAgICAgICB0aGlzLnMuZHQub0luc3RhbmNlLmZuVmVyc2lvbkNoZWNrKCAnMS44LjAnICkgIT09IHRydWUgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCAiRml4ZWRDb2x1bW5zICIrRml4ZWRDb2x1bW5zLlZFUlNJT04rIiByZXF1aXJlZCBEYXRhVGFibGVzIDEuOC4wIG9yIGxhdGVyLiAiKw0KICAgICAgICAgICAgICAgICAgICAiUGxlYXNlIHVwZ3JhZGUgeW91ciBEYXRhVGFibGVzIGluc3RhbGxhdGlvbiIgKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICggdGhpcy5zLmR0Lm9TY3JvbGwuc1ggPT09ICIiICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnMuZHQub0luc3RhbmNlLm9BcGkuX2ZuTG9nKCB0aGlzLnMuZHQsIDEsICJGaXhlZENvbHVtbnMgaXMgbm90IG5lZWRlZCAobm8gIisNCiAgICAgICAgICAgICAgICAgICAgIngtc2Nyb2xsaW5nIGluIERhdGFUYWJsZXMgZW5hYmxlZCksIHNvIG5vIGFjdGlvbiB3aWxsIGJlIHRha2VuLiBVc2UgJ0ZpeGVkSGVhZGVyJyBmb3IgIisNCiAgICAgICAgICAgICAgICAgICAgImNvbHVtbiBmaXhpbmcgd2hlbiBzY3JvbGxpbmcgaXMgbm90IGVuYWJsZWQiICk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvKiBBcHBseSB0aGUgc2V0dGluZ3MgZnJvbSB0aGUgdXNlciAvIGRlZmF1bHRzICovDQogICAgICAgICAgICB0aGlzLnMgPSAkLmV4dGVuZCggdHJ1ZSwgdGhpcy5zLCBGaXhlZENvbHVtbnMuZGVmYXVsdHMsIG9Jbml0ICk7DQoNCiAgICAgICAgICAgIC8qIFNldCB1cCB0aGUgRE9NIGFzIHdlIG5lZWQgaXQgYW5kIGNhY2hlIG5vZGVzICovDQogICAgICAgICAgICB2YXIgY2xhc3NlcyA9IHRoaXMucy5kdC5vQ2xhc3NlczsNCiAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQuZHQgPSAkKHRoaXMucy5kdC5uVGFibGUpLnBhcmVudHMoJ2Rpdi4nK2NsYXNzZXMuc1Njcm9sbFdyYXBwZXIpWzBdOw0KICAgICAgICAgICAgdGhpcy5kb20uc2Nyb2xsZXIgPSAkKCdkaXYuJytjbGFzc2VzLnNTY3JvbGxCb2R5LCB0aGlzLmRvbS5ncmlkLmR0IClbMF07DQoNCiAgICAgICAgICAgIC8qIFNldCB1cCB0aGUgRE9NIHRoYXQgd2Ugd2FudCBmb3IgdGhlIGZpeGVkIGNvbHVtbiBsYXlvdXQgZ3JpZCAqLw0KICAgICAgICAgICAgdGhpcy5fZm5Db2xDYWxjKCk7DQogICAgICAgICAgICB0aGlzLl9mbkdyaWRTZXR1cCgpOw0KDQogICAgICAgICAgICAvKiBFdmVudCBoYW5kbGVycyAqLw0KICAgICAgICAgICAgdmFyIG1vdXNlQ29udHJvbGxlcjsNCiAgICAgICAgICAgIHZhciBtb3VzZURvd24gPSBmYWxzZTsNCg0KICAgICAgICAgICAgLy8gV2hlbiB0aGUgbW91c2UgaXMgZG93biAoZHJhZyBzY3JvbGwpIHRoZSBtb3VzZSBjb250cm9sbGVyIGNhbm5vdA0KICAgICAgICAgICAgLy8gY2hhbmdlLCBhcyB0aGUgYnJvd3NlciBrZWVwcyB0aGUgb3JpZ2luYWwgZWxlbWVudCBhcyB0aGUgc2Nyb2xsaW5nIG9uZQ0KICAgICAgICAgICAgJCh0aGlzLnMuZHQublRhYmxlV3JhcHBlcikub24oICdtb3VzZWRvd24uRFRGQycsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBtb3VzZURvd24gPSB0cnVlOw0KDQogICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKCAnbW91c2V1cCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgbW91c2VEb3duID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfSApOw0KICAgICAgICAgICAgfSApOw0KDQogICAgICAgICAgICAvLyBXaGVuIHRoZSBib2R5IGlzIHNjcm9sbGVkIC0gc2Nyb2xsIHRoZSBsZWZ0IGFuZCByaWdodCBjb2x1bW5zDQogICAgICAgICAgICAkKHRoaXMuZG9tLnNjcm9sbGVyKQ0KICAgICAgICAgICAgICAgIC5vbiggJ21vdXNlb3Zlci5EVEZDIHRvdWNoc3RhcnQuRFRGQycsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhIG1vdXNlRG93biApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlQ29udHJvbGxlciA9ICdtYWluJzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gKQ0KICAgICAgICAgICAgICAgIC5vbiggJ3Njcm9sbC5EVEZDJywgZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhIG1vdXNlQ29udHJvbGxlciAmJiBlLm9yaWdpbmFsRXZlbnQgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtb3VzZUNvbnRyb2xsZXIgPSAnbWFpbic7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAoIG1vdXNlQ29udHJvbGxlciA9PT0gJ21haW4nICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGF0LnMuaUxlZnRDb2x1bW5zID4gMCApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmRvbS5ncmlkLmxlZnQubGluZXIuc2Nyb2xsVG9wID0gdGhhdC5kb20uc2Nyb2xsZXIuc2Nyb2xsVG9wOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGF0LnMuaVJpZ2h0Q29sdW1ucyA+IDAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5kb20uZ3JpZC5yaWdodC5saW5lci5zY3JvbGxUb3AgPSB0aGF0LmRvbS5zY3JvbGxlci5zY3JvbGxUb3A7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9ICk7DQoNCiAgICAgICAgICAgIHZhciB3aGVlbFR5cGUgPSAnb253aGVlbCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgPw0KICAgICAgICAgICAgICAgICd3aGVlbC5EVEZDJyA6DQogICAgICAgICAgICAgICAgJ21vdXNld2hlZWwuRFRGQyc7DQoNCiAgICAgICAgICAgIGlmICggdGhhdC5zLmlMZWZ0Q29sdW1ucyA+IDAgKSB7DQogICAgICAgICAgICAgICAgLy8gV2hlbiBzY3JvbGxpbmcgdGhlIGxlZnQgY29sdW1uLCBzY3JvbGwgdGhlIGJvZHkgYW5kIHJpZ2h0IGNvbHVtbg0KICAgICAgICAgICAgICAgICQodGhhdC5kb20uZ3JpZC5sZWZ0LmxpbmVyKQ0KICAgICAgICAgICAgICAgICAgICAub24oICdtb3VzZW92ZXIuRFRGQyB0b3VjaHN0YXJ0LkRURkMnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoICEgbW91c2VEb3duICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlQ29udHJvbGxlciA9ICdsZWZ0JzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSApDQogICAgICAgICAgICAgICAgICAgIC5vbiggJ3Njcm9sbC5EVEZDJywgZnVuY3Rpb24gKCBlICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhIG1vdXNlQ29udHJvbGxlciAmJiBlLm9yaWdpbmFsRXZlbnQgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VDb250cm9sbGVyID0gJ2xlZnQnOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1vdXNlQ29udHJvbGxlciA9PT0gJ2xlZnQnICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZG9tLnNjcm9sbGVyLnNjcm9sbFRvcCA9IHRoYXQuZG9tLmdyaWQubGVmdC5saW5lci5zY3JvbGxUb3A7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGF0LnMuaVJpZ2h0Q29sdW1ucyA+IDAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZG9tLmdyaWQucmlnaHQubGluZXIuc2Nyb2xsVG9wID0gdGhhdC5kb20uZ3JpZC5sZWZ0LmxpbmVyLnNjcm9sbFRvcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gKQ0KICAgICAgICAgICAgICAgICAgICAub24oIHdoZWVsVHlwZSwgZnVuY3Rpb24oZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyBob3Jpem9udGFsIHNjcm9sbGluZyB0aHJvdWdoDQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeERlbHRhID0gZS50eXBlID09PSAnd2hlZWwnID8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtZS5vcmlnaW5hbEV2ZW50LmRlbHRhWCA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGFYOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5kb20uc2Nyb2xsZXIuc2Nyb2xsTGVmdCAtPSB4RGVsdGE7DQogICAgICAgICAgICAgICAgICAgIH0gKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKCB0aGF0LnMuaVJpZ2h0Q29sdW1ucyA+IDAgKSB7DQogICAgICAgICAgICAgICAgLy8gV2hlbiBzY3JvbGxpbmcgdGhlIHJpZ2h0IGNvbHVtbiwgc2Nyb2xsIHRoZSBib2R5IGFuZCB0aGUgbGVmdCBjb2x1bW4NCiAgICAgICAgICAgICAgICAkKHRoYXQuZG9tLmdyaWQucmlnaHQubGluZXIpDQogICAgICAgICAgICAgICAgICAgIC5vbiggJ21vdXNlb3Zlci5EVEZDIHRvdWNoc3RhcnQuRFRGQycsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISBtb3VzZURvd24gKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VDb250cm9sbGVyID0gJ3JpZ2h0JzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSApDQogICAgICAgICAgICAgICAgICAgIC5vbiggJ3Njcm9sbC5EVEZDJywgZnVuY3Rpb24gKCBlICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhIG1vdXNlQ29udHJvbGxlciAmJiBlLm9yaWdpbmFsRXZlbnQgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VDb250cm9sbGVyID0gJ3JpZ2h0JzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtb3VzZUNvbnRyb2xsZXIgPT09ICdyaWdodCcgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5kb20uc2Nyb2xsZXIuc2Nyb2xsVG9wID0gdGhhdC5kb20uZ3JpZC5yaWdodC5saW5lci5zY3JvbGxUb3A7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGF0LnMuaUxlZnRDb2x1bW5zID4gMCApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5kb20uZ3JpZC5sZWZ0LmxpbmVyLnNjcm9sbFRvcCA9IHRoYXQuZG9tLmdyaWQucmlnaHQubGluZXIuc2Nyb2xsVG9wOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSApDQogICAgICAgICAgICAgICAgICAgIC5vbiggd2hlZWxUeXBlLCBmdW5jdGlvbihlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIGhvcml6b250YWwgc2Nyb2xsaW5nIHRocm91Z2gNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4RGVsdGEgPSBlLnR5cGUgPT09ICd3aGVlbCcgPw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1lLm9yaWdpbmFsRXZlbnQuZGVsdGFYIDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YVg7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmRvbS5zY3JvbGxlci5zY3JvbGxMZWZ0IC09IHhEZWx0YTsNCiAgICAgICAgICAgICAgICAgICAgfSApOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkKHdpbmRvdykub24oICdyZXNpemUuRFRGQycsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICB0aGF0Ll9mbkdyaWRMYXlvdXQuY2FsbCggdGhhdCApOw0KICAgICAgICAgICAgfSApOw0KDQogICAgICAgICAgICB2YXIgYkZpcnN0RHJhdyA9IHRydWU7DQogICAgICAgICAgICB2YXIganFUYWJsZSA9ICQodGhpcy5zLmR0Lm5UYWJsZSk7DQoNCiAgICAgICAgICAgIGpxVGFibGUNCiAgICAgICAgICAgICAgICAub24oICdkcmF3LmR0LkRURkMnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoYXQuX2ZuQ29sQ2FsYygpOw0KICAgICAgICAgICAgICAgICAgICB0aGF0Ll9mbkRyYXcuY2FsbCggdGhhdCwgYkZpcnN0RHJhdyApOw0KICAgICAgICAgICAgICAgICAgICBiRmlyc3REcmF3ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfSApDQogICAgICAgICAgICAgICAgLm9uKCAnY29sdW1uLXNpemluZy5kdC5EVEZDJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGF0Ll9mbkNvbENhbGMoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhhdC5fZm5HcmlkTGF5b3V0KCB0aGF0ICk7DQogICAgICAgICAgICAgICAgfSApDQogICAgICAgICAgICAgICAgLm9uKCAnY29sdW1uLXZpc2liaWxpdHkuZHQuRFRGQycsIGZ1bmN0aW9uICggZSwgc2V0dGluZ3MsIGNvbHVtbiwgdmlzLCByZWNhbGMgKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICggcmVjYWxjID09PSB1bmRlZmluZWQgfHwgcmVjYWxjICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5fZm5Db2xDYWxjKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9mbkdyaWRMYXlvdXQoIHRoYXQgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX2ZuRHJhdyggdHJ1ZSApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSApDQogICAgICAgICAgICAgICAgLm9uKCAnc2VsZWN0LmR0LkRURkMgZGVzZWxlY3QuZHQuRFRGQycsIGZ1bmN0aW9uICggZSwgZHQsIHR5cGUsIGluZGV4ZXMgKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICggZS5uYW1lc3BhY2UgPT09ICdkdCcgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9mbkRyYXcoIGZhbHNlICk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9ICkNCiAgICAgICAgICAgICAgICAub24oICdkZXN0cm95LmR0LkRURkMnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGpxVGFibGUub2ZmKCAnLkRURkMnICk7DQoNCiAgICAgICAgICAgICAgICAgICAgJCh0aGF0LmRvbS5zY3JvbGxlcikub2ZmKCAnLkRURkMnICk7DQogICAgICAgICAgICAgICAgICAgICQod2luZG93KS5vZmYoICcuRFRGQycgKTsNCiAgICAgICAgICAgICAgICAgICAgJCh0aGF0LnMuZHQublRhYmxlV3JhcHBlcikub2ZmKCAnLkRURkMnICk7DQoNCiAgICAgICAgICAgICAgICAgICAgJCh0aGF0LmRvbS5ncmlkLmxlZnQubGluZXIpLm9mZiggJy5EVEZDICcrd2hlZWxUeXBlICk7DQogICAgICAgICAgICAgICAgICAgICQodGhhdC5kb20uZ3JpZC5sZWZ0LndyYXBwZXIpLnJlbW92ZSgpOw0KDQogICAgICAgICAgICAgICAgICAgICQodGhhdC5kb20uZ3JpZC5yaWdodC5saW5lcikub2ZmKCAnLkRURkMgJyt3aGVlbFR5cGUgKTsNCiAgICAgICAgICAgICAgICAgICAgJCh0aGF0LmRvbS5ncmlkLnJpZ2h0LndyYXBwZXIpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgIH0gKTsNCg0KICAgICAgICAgICAgLyogR2V0IHRoaW5ncyByaWdodCB0byBzdGFydCB3aXRoIC0gbm90ZSB0aGF0IGR1ZSB0byBhZGp1c3RpbmcgdGhlIGNvbHVtbnMsIHRoZXJlIG11c3QgYmUNCiAgICAgICAgICAgICAqIGFub3RoZXIgcmVkcmF3IG9mIHRoZSBtYWluIHRhYmxlLiBJdCBkb2Vzbid0IG5lZWQgdG8gYmUgYSBmdWxsIHJlZHJhdyBob3dldmVyLg0KICAgICAgICAgICAgICovDQogICAgICAgICAgICB0aGlzLl9mbkdyaWRMYXlvdXQoKTsNCiAgICAgICAgICAgIHRoaXMucy5kdC5vSW5zdGFuY2UuZm5EcmF3KGZhbHNlKTsNCiAgICAgICAgfSwNCg0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIGNvbHVtbiB3aWR0aHMgZm9yIHRoZSBncmlkIGxheW91dA0KICAgICAgICAgKiAgQHJldHVybnMge3ZvaWR9DQogICAgICAgICAqICBAcHJpdmF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgIl9mbkNvbENhbGMiOiBmdW5jdGlvbiAoKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7DQogICAgICAgICAgICB2YXIgaUxlZnRXaWR0aCA9IDA7DQogICAgICAgICAgICB2YXIgaVJpZ2h0V2lkdGggPSAwOw0KDQogICAgICAgICAgICB0aGlzLnMuYWlJbm5lcldpZHRocyA9IFtdOw0KICAgICAgICAgICAgdGhpcy5zLmFpT3V0ZXJXaWR0aHMgPSBbXTsNCg0KICAgICAgICAgICAgJC5lYWNoKCB0aGlzLnMuZHQuYW9Db2x1bW5zLCBmdW5jdGlvbiAoaSwgY29sKSB7DQogICAgICAgICAgICAgICAgdmFyIHRoID0gJChjb2wublRoKTsNCiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyOw0KDQogICAgICAgICAgICAgICAgaWYgKCAhIHRoLmZpbHRlcignOnZpc2libGUnKS5sZW5ndGggKSB7DQogICAgICAgICAgICAgICAgICAgIHRoYXQucy5haUlubmVyV2lkdGhzLnB1c2goIDAgKTsNCiAgICAgICAgICAgICAgICAgICAgdGhhdC5zLmFpT3V0ZXJXaWR0aHMucHVzaCggMCApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBJbm5lciB3aWR0aCBpcyB1c2VkIHRvIGFzc2lnbiB3aWR0aHMgdG8gY2VsbHMNCiAgICAgICAgICAgICAgICAgICAgLy8gT3V0ZXIgd2lkdGggaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGNvbnRhaW5lcg0KICAgICAgICAgICAgICAgICAgICB2YXIgaVdpZHRoID0gdGgub3V0ZXJXaWR0aCgpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gd29ya2luZyB3aXRoIHRoZSBsZWZ0IG1vc3QtY2VsbCwgbmVlZCB0byBhZGQgb24gdGhlDQogICAgICAgICAgICAgICAgICAgIC8vIHRhYmxlJ3MgYm9yZGVyIHRvIHRoZSBvdXRlcldpZHRoLCBzaW5jZSB3ZSBuZWVkIHRvIHRha2UNCiAgICAgICAgICAgICAgICAgICAgLy8gYWNjb3VudCBvZiBpdCwgYnV0IGl0IGlzbid0IGluIGFueSBjZWxsDQogICAgICAgICAgICAgICAgICAgIGlmICggdGhhdC5zLmFpT3V0ZXJXaWR0aHMubGVuZ3RoID09PSAwICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyID0gJCh0aGF0LnMuZHQublRhYmxlKS5jc3MoJ2JvcmRlci1sZWZ0LXdpZHRoJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpV2lkdGggKz0gdHlwZW9mIGJvcmRlciA9PT0gJ3N0cmluZycgPyAxIDogcGFyc2VJbnQoIGJvcmRlciwgMTAgKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIExpa2V3aXNlIHdpdGggdGhlIGZpbmFsIGNvbHVtbiBvbiB0aGUgcmlnaHQNCiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGF0LnMuYWlPdXRlcldpZHRocy5sZW5ndGggPT09IHRoYXQucy5kdC5hb0NvbHVtbnMubGVuZ3RoLTEgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIgPSAkKHRoYXQucy5kdC5uVGFibGUpLmNzcygnYm9yZGVyLXJpZ2h0LXdpZHRoJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpV2lkdGggKz0gdHlwZW9mIGJvcmRlciA9PT0gJ3N0cmluZycgPyAxIDogcGFyc2VJbnQoIGJvcmRlciwgMTAgKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIHRoYXQucy5haU91dGVyV2lkdGhzLnB1c2goIGlXaWR0aCApOw0KICAgICAgICAgICAgICAgICAgICB0aGF0LnMuYWlJbm5lcldpZHRocy5wdXNoKCB0aC53aWR0aCgpICk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCBpIDwgdGhhdC5zLmlMZWZ0Q29sdW1ucyApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlMZWZ0V2lkdGggKz0gaVdpZHRoOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGF0LnMuaVRhYmxlQ29sdW1ucy10aGF0LnMuaVJpZ2h0Q29sdW1ucyA8PSBpICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgaVJpZ2h0V2lkdGggKz0gaVdpZHRoOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSApOw0KDQogICAgICAgICAgICB0aGlzLnMuaUxlZnRXaWR0aCA9IGlMZWZ0V2lkdGg7DQogICAgICAgICAgICB0aGlzLnMuaVJpZ2h0V2lkdGggPSBpUmlnaHRXaWR0aDsNCiAgICAgICAgfSwNCg0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBTZXQgdXAgdGhlIERPTSBmb3IgdGhlIGZpeGVkIGNvbHVtbi4gVGhlIHdheSB0aGUgbGF5b3V0IHdvcmtzIGlzIHRvIGNyZWF0ZSBhIDF4MyBncmlkDQogICAgICAgICAqIGZvciB0aGUgbGVmdCBjb2x1bW4sIHRoZSBEYXRhVGFibGUgKGZvciB3aGljaCB3ZSBqdXN0IHJldXNlIHRoZSBzY3JvbGxpbmcgZWxlbWVudCBEYXRhVGFibGUNCiAgICAgICAgICogcHV0cyBpbnRvIHRoZSBET00pIGFuZCB0aGUgcmlnaHQgY29sdW1uLiBJbiBlYWNoIG9mIGhlIHR3byBmaXhlZCBjb2x1bW4gZWxlbWVudHMgdGhlcmUgaXMgYQ0KICAgICAgICAgKiBncm91cGluZyB3cmFwcGVyIGVsZW1lbnQgYW5kIHRoZW4gYSBoZWFkLCBib2R5IGFuZCBmb290ZXIgd3JhcHBlci4gSW4gZWFjaCBvZiB0aGVzZSB3ZSB0aGVuDQogICAgICAgICAqIHBsYWNlIHRoZSBjbG9uZWQgaGVhZGVyLCBib2R5IG9yIGZvb3RlciB0YWJsZXMuIFRoaXMgZWZmZWN0aXZlbHkgZ2l2ZXMgYXMgM3gzIGdyaWQgc3RydWN0dXJlLg0KICAgICAgICAgKiAgQHJldHVybnMge3ZvaWR9DQogICAgICAgICAqICBAcHJpdmF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgIl9mbkdyaWRTZXR1cCI6IGZ1bmN0aW9uICgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsNCiAgICAgICAgICAgIHZhciBvT3ZlcmZsb3cgPSB0aGlzLl9mbkRUT3ZlcmZsb3coKTsNCiAgICAgICAgICAgIHZhciBibG9jazsNCg0KICAgICAgICAgICAgdGhpcy5kb20uYm9keSA9IHRoaXMucy5kdC5uVGFibGU7DQogICAgICAgICAgICB0aGlzLmRvbS5oZWFkZXIgPSB0aGlzLnMuZHQublRIZWFkLnBhcmVudE5vZGU7DQogICAgICAgICAgICB0aGlzLmRvbS5oZWFkZXIucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsNCg0KICAgICAgICAgICAgdmFyIG5TV3JhcHBlciA9DQogICAgICAgICAgICAgICAgJCgnPGRpdiBjbGFzcz0iRFRGQ19TY3JvbGxXcmFwcGVyIiBzdHlsZT0icG9zaXRpb246cmVsYXRpdmU7IGNsZWFyOmJvdGg7Ij4nKw0KICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iRFRGQ19MZWZ0V3JhcHBlciIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyB0b3A6MDsgbGVmdDowOyI+JysNCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9IkRURkNfTGVmdEhlYWRXcmFwcGVyIiBzdHlsZT0icG9zaXRpb246cmVsYXRpdmU7IHRvcDowOyBsZWZ0OjA7IG92ZXJmbG93OmhpZGRlbjsiPjwvZGl2PicrDQogICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJEVEZDX0xlZnRCb2R5V3JhcHBlciIgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlOyB0b3A6MDsgbGVmdDowOyBvdmVyZmxvdzpoaWRkZW47Ij4nKw0KICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iRFRGQ19MZWZ0Qm9keUxpbmVyIiBzdHlsZT0icG9zaXRpb246cmVsYXRpdmU7IHRvcDowOyBsZWZ0OjA7IG92ZXJmbG93LXk6c2Nyb2xsOyBvdmVyZmxvdy14OmhpZGRlbiI+PC9kaXY+JysNCiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrDQogICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJEVEZDX0xlZnRGb290V3JhcHBlciIgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlOyB0b3A6MDsgbGVmdDowOyBvdmVyZmxvdzpoaWRkZW47Ij48L2Rpdj4nKw0KICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JysNCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9IkRURkNfUmlnaHRXcmFwcGVyIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7IHRvcDowOyByaWdodDowOyI+JysNCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9IkRURkNfUmlnaHRIZWFkV3JhcHBlciIgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlOyB0b3A6MDsgbGVmdDowOyI+JysNCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9IkRURkNfUmlnaHRIZWFkQmxvY2tlciBEVEZDX0Jsb2NrZXIiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOjA7IGJvdHRvbTowOyI+PC9kaXY+JysNCiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrDQogICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJEVEZDX1JpZ2h0Qm9keVdyYXBwZXIiIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTsgdG9wOjA7IGxlZnQ6MDsgb3ZlcmZsb3c6aGlkZGVuOyI+JysNCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9IkRURkNfUmlnaHRCb2R5TGluZXIiIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTsgdG9wOjA7IGxlZnQ6MDsgb3ZlcmZsb3cteTpzY3JvbGw7IG92ZXJmbG93LXg6IGhpZGRlbiI+PC9kaXY+JysNCiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrDQogICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJEVEZDX1JpZ2h0Rm9vdFdyYXBwZXIiIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTsgdG9wOjA7IGxlZnQ6MDsiPicrDQogICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJEVEZDX1JpZ2h0Rm9vdEJsb2NrZXIgRFRGQ19CbG9ja2VyIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7IHRvcDowOyBib3R0b206MDsiPjwvZGl2PicrDQogICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nKw0KICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JysNCiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicpWzBdOw0KICAgICAgICAgICAgdmFyIG5MZWZ0ID0gblNXcmFwcGVyLmNoaWxkTm9kZXNbMF07DQogICAgICAgICAgICB2YXIgblJpZ2h0ID0gblNXcmFwcGVyLmNoaWxkTm9kZXNbMV07DQoNCiAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQuZHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIG5TV3JhcHBlciwgdGhpcy5kb20uZ3JpZC5kdCApOw0KICAgICAgICAgICAgblNXcmFwcGVyLmFwcGVuZENoaWxkKCB0aGlzLmRvbS5ncmlkLmR0ICk7DQoNCiAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQud3JhcHBlciA9IG5TV3JhcHBlcjsNCg0KICAgICAgICAgICAgaWYgKCB0aGlzLnMuaUxlZnRDb2x1bW5zID4gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5kb20uZ3JpZC5sZWZ0LndyYXBwZXIgPSBuTGVmdDsNCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5ncmlkLmxlZnQuaGVhZCA9IG5MZWZ0LmNoaWxkTm9kZXNbMF07DQogICAgICAgICAgICAgICAgdGhpcy5kb20uZ3JpZC5sZWZ0LmJvZHkgPSBuTGVmdC5jaGlsZE5vZGVzWzFdOw0KICAgICAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQubGVmdC5saW5lciA9ICQoJ2Rpdi5EVEZDX0xlZnRCb2R5TGluZXInLCBuU1dyYXBwZXIpWzBdOw0KDQogICAgICAgICAgICAgICAgblNXcmFwcGVyLmFwcGVuZENoaWxkKCBuTGVmdCApOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoIHRoaXMucy5pUmlnaHRDb2x1bW5zID4gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5kb20uZ3JpZC5yaWdodC53cmFwcGVyID0gblJpZ2h0Ow0KICAgICAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQucmlnaHQuaGVhZCA9IG5SaWdodC5jaGlsZE5vZGVzWzBdOw0KICAgICAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQucmlnaHQuYm9keSA9IG5SaWdodC5jaGlsZE5vZGVzWzFdOw0KICAgICAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQucmlnaHQubGluZXIgPSAkKCdkaXYuRFRGQ19SaWdodEJvZHlMaW5lcicsIG5TV3JhcHBlcilbMF07DQoNCiAgICAgICAgICAgICAgICAvLyBuUmlnaHQuc3R5bGUucmlnaHQgPSBvT3ZlcmZsb3cuYmFyKyJweCI7DQogICAgICAgICAgICAgICAgdmFyIGRhdGFUYWJsZVNjcm9sbFBhbmUgPSAkKCQodGhpcy5kb20uZ3JpZC5kdClbMF0pDQogICAgICAgICAgICAgICAgdmFyIHJpZ2h0UG9zaSA9IGRhdGFUYWJsZVNjcm9sbFBhbmUud2lkdGgoKSAtDQogICAgICAgICAgICAgICAgICAgIGRhdGFUYWJsZVNjcm9sbFBhbmUuY2hpbGRyZW4oJy5kYXRhVGFibGVzX3Njcm9sbEJvZHknKS5jaGlsZHJlbigndGFibGUnKS53aWR0aCgpOw0KDQogICAgICAgICAgICAgICAgaWYgKHJpZ2h0UG9zaSA8IDApDQogICAgICAgICAgICAgICAgICAgIHJpZ2h0UG9zaSA9IDA7DQoNCiAgICAgICAgICAgICAgICBuUmlnaHQuc3R5bGUucmlnaHQgPSByaWdodFBvc2kgKyAicHgiOw0KDQogICAgICAgICAgICAgICAgYmxvY2sgPSAkKCdkaXYuRFRGQ19SaWdodEhlYWRCbG9ja2VyJywgblNXcmFwcGVyKVswXTsNCiAgICAgICAgICAgICAgICBibG9jay5zdHlsZS53aWR0aCA9IG9PdmVyZmxvdy5iYXIrInB4IjsNCiAgICAgICAgICAgICAgICAvLyBibG9jay5zdHlsZS5yaWdodCA9IC1vT3ZlcmZsb3cuYmFyKyJweCI7DQoNCiAgICAgICAgICAgICAgICBibG9jay5zdHlsZS5yaWdodCA9IHJpZ2h0UG9zaSArInB4IjsNCg0KICAgICAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQucmlnaHQuaGVhZEJsb2NrID0gYmxvY2s7DQoNCiAgICAgICAgICAgICAgICBibG9jayA9ICQoJ2Rpdi5EVEZDX1JpZ2h0Rm9vdEJsb2NrZXInLCBuU1dyYXBwZXIpWzBdOw0KICAgICAgICAgICAgICAgIGJsb2NrLnN0eWxlLndpZHRoID0gb092ZXJmbG93LmJhcisicHgiOw0KICAgICAgICAgICAgICAgIC8vIGJsb2NrLnN0eWxlLnJpZ2h0ID0gLW9PdmVyZmxvdy5iYXIrInB4IjsNCiAgICAgICAgICAgICAgICBibG9jay5zdHlsZS5yaWdodCA9IHJpZ2h0UG9zaSsicHgiOw0KICAgICAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQucmlnaHQuZm9vdEJsb2NrID0gYmxvY2s7DQoNCiAgICAgICAgICAgICAgICBuU1dyYXBwZXIuYXBwZW5kQ2hpbGQoIG5SaWdodCApOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoIHRoaXMucy5kdC5uVEZvb3QgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuZG9tLmZvb3RlciA9IHRoaXMucy5kdC5uVEZvb3QucGFyZW50Tm9kZTsNCiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucy5pTGVmdENvbHVtbnMgPiAwICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmdyaWQubGVmdC5mb290ID0gbkxlZnQuY2hpbGROb2Rlc1syXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKCB0aGlzLnMuaVJpZ2h0Q29sdW1ucyA+IDAgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uZ3JpZC5yaWdodC5mb290ID0gblJpZ2h0LmNoaWxkTm9kZXNbMl07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBSVEwgc3VwcG9ydCAtIHN3YXAgdGhlIHBvc2l0aW9uIG9mIHRoZSBsZWZ0IGFuZCByaWdodCBjb2x1bW5zICgjNDgpDQogICAgICAgICAgICBpZiAoIHRoaXMucy5ydGwgKSB7DQogICAgICAgICAgICAgICAgJCgnZGl2LkRURkNfUmlnaHRIZWFkQmxvY2tlcicsIG5TV3JhcHBlcikuY3NzKCB7DQogICAgICAgICAgICAgICAgICAgIGxlZnQ6IC1vT3ZlcmZsb3cuYmFyKydweCcsDQogICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnJw0KICAgICAgICAgICAgICAgIH0gKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCg0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBTdHlsZSBhbmQgcG9zaXRpb24gdGhlIGdyaWQgdXNlZCBmb3IgdGhlIEZpeGVkQ29sdW1ucyBsYXlvdXQNCiAgICAgICAgICogIEByZXR1cm5zIHt2b2lkfQ0KICAgICAgICAgKiAgQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgICJfZm5HcmlkTGF5b3V0IjogZnVuY3Rpb24gKCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOw0KICAgICAgICAgICAgdmFyIG9HcmlkID0gdGhpcy5kb20uZ3JpZDsNCiAgICAgICAgICAgIHZhciBpV2lkdGggPSAkKG9HcmlkLndyYXBwZXIpLndpZHRoKCk7DQogICAgICAgICAgICB2YXIgaUJvZHlIZWlnaHQgPSAkKHRoaXMucy5kdC5uVGFibGUucGFyZW50Tm9kZSkub3V0ZXJIZWlnaHQoKTsNCiAgICAgICAgICAgIHZhciBpRnVsbEhlaWdodCA9ICQodGhpcy5zLmR0Lm5UYWJsZS5wYXJlbnROb2RlLnBhcmVudE5vZGUpLm91dGVySGVpZ2h0KCk7DQogICAgICAgICAgICB2YXIgb092ZXJmbG93ID0gdGhpcy5fZm5EVE92ZXJmbG93KCk7DQogICAgICAgICAgICB2YXIgaUxlZnRXaWR0aCA9IHRoaXMucy5pTGVmdFdpZHRoOw0KICAgICAgICAgICAgdmFyIGlSaWdodFdpZHRoID0gdGhpcy5zLmlSaWdodFdpZHRoOw0KICAgICAgICAgICAgdmFyIHJ0bCA9ICQodGhpcy5kb20uYm9keSkuY3NzKCdkaXJlY3Rpb24nKSA9PT0gJ3J0bCc7DQogICAgICAgICAgICB2YXIgd3JhcHBlcjsNCiAgICAgICAgICAgIHZhciBzY3JvbGxiYXJBZGp1c3QgPSBmdW5jdGlvbiAoIG5vZGUsIHdpZHRoICkgew0KICAgICAgICAgICAgICAgIGlmICggISBvT3ZlcmZsb3cuYmFyICkgew0KICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBzY3JvbGxiYXIgKE1hY3MpIHdlIG5lZWQgdG8gaGlkZSB0aGUgYXV0byBzY3JvbGxiYXINCiAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZS53aWR0aCA9ICh3aWR0aCsyMCkrInB4IjsNCiAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5wYWRkaW5nUmlnaHQgPSAiMjBweCI7DQogICAgICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuYm94U2l6aW5nID0gImJvcmRlci1ib3giOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICggdGhhdC5fZmlyZWZveFNjcm9sbEVycm9yKCkgKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFNlZSB0aGUgYWJvdmUgZnVuY3Rpb24gZm9yIHdoeSB0aGlzIGlzIHJlcXVpcmVkDQogICAgICAgICAgICAgICAgICAgIGlmICggJChub2RlKS5oZWlnaHQoKSA+IDM0ICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZS53aWR0aCA9ICh3aWR0aCtvT3ZlcmZsb3cuYmFyKSsicHgiOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UganVzdCBvdmVyZmxvdyBieSB0aGUgc2Nyb2xsYmFyDQogICAgICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUud2lkdGggPSAod2lkdGgrb092ZXJmbG93LmJhcikrInB4IjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyBXaGVuIHggc2Nyb2xsaW5nIC0gZG9uJ3QgcGFpbnQgdGhlIGZpeGVkIGNvbHVtbnMgb3ZlciB0aGUgeCBzY3JvbGxiYXINCiAgICAgICAgICAgIGlmICggb092ZXJmbG93LnggKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlCb2R5SGVpZ2h0IC09IG9PdmVyZmxvdy5iYXI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIG9HcmlkLndyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gaUZ1bGxIZWlnaHQrInB4IjsNCg0KICAgICAgICAgICAgaWYgKCB0aGlzLnMuaUxlZnRDb2x1bW5zID4gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgd3JhcHBlciA9IG9HcmlkLmxlZnQud3JhcHBlcjsNCiAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLndpZHRoID0gaUxlZnRXaWR0aCsncHgnOw0KICAgICAgICAgICAgICAgIHdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gJzFweCc7DQoNCiAgICAgICAgICAgICAgICAvLyBTd2FwIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGVmdCBhbmQgcmlnaHQgY29sdW1ucyBmb3IgcnRsICgjNDgpDQogICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhbHdheXMgdXAgYWdhaW5zdCB0aGUgZWRnZSwgc2Nyb2xsYmFyIG9uIHRoZSBmYXIgc2lkZQ0KICAgICAgICAgICAgICAgIGlmICggcnRsICkgew0KICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmxlZnQgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5zdHlsZS5yaWdodCA9IDA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmxlZnQgPSAwOw0KICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLnJpZ2h0ID0gJyc7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgb0dyaWQubGVmdC5ib2R5LnN0eWxlLmhlaWdodCA9IGlCb2R5SGVpZ2h0KyJweCI7DQogICAgICAgICAgICAgICAgaWYgKCBvR3JpZC5sZWZ0LmZvb3QgKSB7DQogICAgICAgICAgICAgICAgICAgIG9HcmlkLmxlZnQuZm9vdC5zdHlsZS50b3AgPSAob092ZXJmbG93LnggPyBvT3ZlcmZsb3cuYmFyIDogMCkrInB4IjsgLy8gc2hpZnQgZm9vdGVyIGZvciBzY3JvbGxiYXINCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBzY3JvbGxiYXJBZGp1c3QoIG9HcmlkLmxlZnQubGluZXIsIGlMZWZ0V2lkdGggKTsNCiAgICAgICAgICAgICAgICBvR3JpZC5sZWZ0LmxpbmVyLnN0eWxlLmhlaWdodCA9IGlCb2R5SGVpZ2h0KyJweCI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICggdGhpcy5zLmlSaWdodENvbHVtbnMgPiAwICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB3cmFwcGVyID0gb0dyaWQucmlnaHQud3JhcHBlcjsNCiAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLndpZHRoID0gaVJpZ2h0V2lkdGgrJ3B4JzsNCiAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmhlaWdodCA9ICcxcHgnOw0KDQogICAgICAgICAgICAgICAgdmFyIGRhdGFUYWJsZVNjcm9sbFBhbmUgPSAkKCQob0dyaWQuZHQpWzBdKQ0KICAgICAgICAgICAgICAgIHZhciByaWdodFBvc2kgPSBkYXRhVGFibGVTY3JvbGxQYW5lLndpZHRoKCkgLQ0KICAgICAgICAgICAgICAgICAgICBkYXRhVGFibGVTY3JvbGxQYW5lLmNoaWxkcmVuKCcuZGF0YVRhYmxlc19zY3JvbGxCb2R5JykuY2hpbGRyZW4oJ3RhYmxlJykud2lkdGgoKTsNCg0KICAgICAgICAgICAgICAgIGlmIChyaWdodFBvc2kgPCAwKQ0KICAgICAgICAgICAgICAgICAgICByaWdodFBvc2kgPSAwOw0KDQogICAgICAgICAgICAgICAgLy8gTmVlZCB0byB0YWtlIGFjY291bnQgb2YgdGhlIHZlcnRpY2FsIHNjcm9sbGJhcg0KICAgICAgICAgICAgICAgIGlmICggdGhpcy5zLnJ0bCApIHsNCiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5zdHlsZS5sZWZ0ID0gb092ZXJmbG93LnkgPyBvT3ZlcmZsb3cuYmFyKydweCcgOiAwOw0KICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLnJpZ2h0ID0gJyc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmxlZnQgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgLy8gd3JhcHBlci5zdHlsZS5yaWdodCA9IG9PdmVyZmxvdy55ID8gb092ZXJmbG93LmJhcisncHgnIDogMDsNCg0KICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLnJpZ2h0ID0gcmlnaHRQb3NpICsgInB4IjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBvR3JpZC5yaWdodC5ib2R5LnN0eWxlLmhlaWdodCA9IGlCb2R5SGVpZ2h0KyJweCI7DQogICAgICAgICAgICAgICAgaWYgKCBvR3JpZC5yaWdodC5mb290ICkgew0KICAgICAgICAgICAgICAgICAgICBvR3JpZC5yaWdodC5mb290LnN0eWxlLnRvcCA9IChvT3ZlcmZsb3cueCA/IG9PdmVyZmxvdy5iYXIgOiAwKSsicHgiOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHNjcm9sbGJhckFkanVzdCggb0dyaWQucmlnaHQubGluZXIsIGlSaWdodFdpZHRoICk7DQogICAgICAgICAgICAgICAgb0dyaWQucmlnaHQubGluZXIuc3R5bGUuaGVpZ2h0ID0gaUJvZHlIZWlnaHQrInB4IjsNCg0KICAgICAgICAgICAgICAgIG9HcmlkLnJpZ2h0LmhlYWRCbG9jay5zdHlsZS5kaXNwbGF5ID0gb092ZXJmbG93LnkgPyAnYmxvY2snIDogJ25vbmUnOw0KICAgICAgICAgICAgICAgIG9HcmlkLnJpZ2h0LmZvb3RCbG9jay5zdHlsZS5kaXNwbGF5ID0gb092ZXJmbG93LnkgPyAnYmxvY2snIDogJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEdldCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgRGF0YVRhYmxlJ3Mgc2Nyb2xsaW5nIHN0YXRlIC0gc3BlY2lmaWNhbGx5IGlmIHRoZSB0YWJsZSBpcyBzY3JvbGxpbmcNCiAgICAgICAgICogb24gZWl0aGVyIHRoZSB4IG9yIHkgYXhpcywgYW5kIGFsc28gdGhlIHNjcm9sbGJhciB3aWR0aC4NCiAgICAgICAgICogIEByZXR1cm5zIHtvYmplY3R9IEluZm9ybWF0aW9uIGFib3V0IHRoZSBEYXRhVGFibGVzIHNjcm9sbGluZyBzdGF0ZSB3aXRoIHRoZSBwcm9wZXJ0aWVzOg0KICAgICAgICAgKiAgICAneCcsICd5JyBhbmQgJ2JhcicNCiAgICAgICAgICogIEBwcml2YXRlDQogICAgICAgICAqLw0KICAgICAgICAiX2ZuRFRPdmVyZmxvdyI6IGZ1bmN0aW9uICgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBuVGFibGUgPSB0aGlzLnMuZHQublRhYmxlOw0KICAgICAgICAgICAgdmFyIG5UYWJsZVNjcm9sbEJvZHkgPSBuVGFibGUucGFyZW50Tm9kZTsNCiAgICAgICAgICAgIHZhciBvdXQgPSB7DQogICAgICAgICAgICAgICAgIngiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAieSI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICJiYXIiOiB0aGlzLnMuZHQub1Njcm9sbC5pQmFyV2lkdGgNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGlmICggblRhYmxlLm9mZnNldFdpZHRoID4gblRhYmxlU2Nyb2xsQm9keS5jbGllbnRXaWR0aCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgb3V0LnggPSB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoIG5UYWJsZS5vZmZzZXRIZWlnaHQgPiBuVGFibGVTY3JvbGxCb2R5LmNsaWVudEhlaWdodCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgb3V0LnkgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gb3V0Ow0KICAgICAgICB9LA0KDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIENsb25lIGFuZCBwb3NpdGlvbiB0aGUgZml4ZWQgY29sdW1ucw0KICAgICAgICAgKiAgQHJldHVybnMge3ZvaWR9DQogICAgICAgICAqICBAcGFyYW0gICB7Qm9vbGVhbn0gYkFsbCBJbmRpY2F0ZSBpZiB0aGUgaGVhZGVyIGFuZCBmb290ZXIgc2hvdWxkIGJlIHVwZGF0ZWQgYXMgd2VsbCAodHJ1ZSkNCiAgICAgICAgICogIEBwcml2YXRlDQogICAgICAgICAqLw0KICAgICAgICAiX2ZuRHJhdyI6IGZ1bmN0aW9uICggYkFsbCApDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuX2ZuR3JpZExheW91dCgpOw0KICAgICAgICAgICAgdGhpcy5fZm5DbG9uZUxlZnQoIGJBbGwgKTsNCiAgICAgICAgICAgIHRoaXMuX2ZuQ2xvbmVSaWdodCggYkFsbCApOw0KDQogICAgICAgICAgICAvKiBEcmF3IGNhbGxiYWNrIGZ1bmN0aW9uICovDQogICAgICAgICAgICBpZiAoIHRoaXMucy5mbkRyYXdDYWxsYmFjayAhPT0gbnVsbCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5zLmZuRHJhd0NhbGxiYWNrLmNhbGwoIHRoaXMsIHRoaXMuZG9tLmNsb25lLmxlZnQsIHRoaXMuZG9tLmNsb25lLnJpZ2h0ICk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8qIEV2ZW50IHRyaWdnZXJpbmcgKi8NCiAgICAgICAgICAgICQodGhpcykudHJpZ2dlciggJ2RyYXcuZHRmYycsIHsNCiAgICAgICAgICAgICAgICAibGVmdENsb25lIjogdGhpcy5kb20uY2xvbmUubGVmdCwNCiAgICAgICAgICAgICAgICAicmlnaHRDbG9uZSI6IHRoaXMuZG9tLmNsb25lLnJpZ2h0DQogICAgICAgICAgICB9ICk7DQogICAgICAgIH0sDQoNCg0KICAgICAgICAvKioNCiAgICAgICAgICogQ2xvbmUgdGhlIHJpZ2h0IGNvbHVtbnMNCiAgICAgICAgICogIEByZXR1cm5zIHt2b2lkfQ0KICAgICAgICAgKiAgQHBhcmFtICAge0Jvb2xlYW59IGJBbGwgSW5kaWNhdGUgaWYgdGhlIGhlYWRlciBhbmQgZm9vdGVyIHNob3VsZCBiZSB1cGRhdGVkIGFzIHdlbGwgKHRydWUpDQogICAgICAgICAqICBAcHJpdmF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgIl9mbkNsb25lUmlnaHQiOiBmdW5jdGlvbiAoIGJBbGwgKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIHRoaXMucy5pUmlnaHRDb2x1bW5zIDw9IDAgKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsDQogICAgICAgICAgICAgICAgaSwganEsDQogICAgICAgICAgICAgICAgYWlDb2x1bW5zID0gW107DQoNCiAgICAgICAgICAgIGZvciAoIGk9dGhpcy5zLmlUYWJsZUNvbHVtbnMtdGhpcy5zLmlSaWdodENvbHVtbnMgOyBpPHRoaXMucy5pVGFibGVDb2x1bW5zIDsgaSsrICkgew0KICAgICAgICAgICAgICAgIGlmICggdGhpcy5zLmR0LmFvQ29sdW1uc1tpXS5iVmlzaWJsZSApIHsNCiAgICAgICAgICAgICAgICAgICAgYWlDb2x1bW5zLnB1c2goIGkgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMuX2ZuQ2xvbmUoIHRoaXMuZG9tLmNsb25lLnJpZ2h0LCB0aGlzLmRvbS5ncmlkLnJpZ2h0LCBhaUNvbHVtbnMsIGJBbGwgKTsNCiAgICAgICAgfSwNCg0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBDbG9uZSB0aGUgbGVmdCBjb2x1bW5zDQogICAgICAgICAqICBAcmV0dXJucyB7dm9pZH0NCiAgICAgICAgICogIEBwYXJhbSAgIHtCb29sZWFufSBiQWxsIEluZGljYXRlIGlmIHRoZSBoZWFkZXIgYW5kIGZvb3RlciBzaG91bGQgYmUgdXBkYXRlZCBhcyB3ZWxsICh0cnVlKQ0KICAgICAgICAgKiAgQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgICJfZm5DbG9uZUxlZnQiOiBmdW5jdGlvbiAoIGJBbGwgKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIHRoaXMucy5pTGVmdENvbHVtbnMgPD0gMCApIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywNCiAgICAgICAgICAgICAgICBpLCBqcSwNCiAgICAgICAgICAgICAgICBhaUNvbHVtbnMgPSBbXTsNCg0KICAgICAgICAgICAgZm9yICggaT0wIDsgaTx0aGlzLnMuaUxlZnRDb2x1bW5zIDsgaSsrICkgew0KICAgICAgICAgICAgICAgIGlmICggdGhpcy5zLmR0LmFvQ29sdW1uc1tpXS5iVmlzaWJsZSApIHsNCiAgICAgICAgICAgICAgICAgICAgYWlDb2x1bW5zLnB1c2goIGkgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMuX2ZuQ2xvbmUoIHRoaXMuZG9tLmNsb25lLmxlZnQsIHRoaXMuZG9tLmdyaWQubGVmdCwgYWlDb2x1bW5zLCBiQWxsICk7DQogICAgICAgIH0sDQoNCg0KICAgICAgICAvKioNCiAgICAgICAgICogTWFrZSBhIGNvcHkgb2YgdGhlIGxheW91dCBvYmplY3QgZm9yIGEgaGVhZGVyIG9yIGZvb3RlciBlbGVtZW50IGZyb20gRGF0YVRhYmxlcy4gTm90ZSB0aGF0DQogICAgICAgICAqIHRoaXMgbWV0aG9kIHdpbGwgY2xvbmUgdGhlIG5vZGVzIGluIHRoZSBsYXlvdXQgb2JqZWN0Lg0KICAgICAgICAgKiAgQHJldHVybnMge0FycmF5fSBDb3B5IG9mIHRoZSBsYXlvdXQgYXJyYXkNCiAgICAgICAgICogIEBwYXJhbSAgIHtPYmplY3R9IGFvT3JpZ2luYWwgTGF5b3V0IGFycmF5IGZyb20gRGF0YVRhYmxlcyAoYW9IZWFkZXIgb3IgYW9Gb290ZXIpDQogICAgICAgICAqICBAcGFyYW0gICB7T2JqZWN0fSBhaUNvbHVtbnMgQ29sdW1ucyB0byBjb3B5DQogICAgICAgICAqICBAcGFyYW0gICB7Ym9vbGVhbn0gZXZlbnRzIENvcHkgY2VsbCBldmVudHMgb3Igbm90DQogICAgICAgICAqICBAcHJpdmF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgIl9mbkNvcHlMYXlvdXQiOiBmdW5jdGlvbiAoIGFvT3JpZ2luYWwsIGFpQ29sdW1ucywgZXZlbnRzICkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGFSZXR1cm4gPSBbXTsNCiAgICAgICAgICAgIHZhciBhQ2xvbmVzID0gW107DQogICAgICAgICAgICB2YXIgYUNsb25lZCA9IFtdOw0KDQogICAgICAgICAgICBmb3IgKCB2YXIgaT0wLCBpTGVuPWFvT3JpZ2luYWwubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgYVJvdyA9IFtdOw0KICAgICAgICAgICAgICAgIGFSb3cublRyID0gJChhb09yaWdpbmFsW2ldLm5UcikuY2xvbmUoZXZlbnRzLCBmYWxzZSlbMF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaj0wLCBqTGVuPXRoaXMucy5pVGFibGVDb2x1bW5zIDsgajxqTGVuIDsgaisrICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICggJC5pbkFycmF5KCBqLCBhaUNvbHVtbnMgKSA9PT0gLTEgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIHZhciBpQ2xvbmVkID0gJC5pbkFycmF5KCBhb09yaWdpbmFsW2ldW2pdLmNlbGwsIGFDbG9uZWQgKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCBpQ2xvbmVkID09PSAtMSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuQ2xvbmUgPSAkKGFvT3JpZ2luYWxbaV1bal0uY2VsbCkuY2xvbmUoZXZlbnRzLCBmYWxzZSlbMF07DQogICAgICAgICAgICAgICAgICAgICAgICBhQ2xvbmVzLnB1c2goIG5DbG9uZSApOw0KICAgICAgICAgICAgICAgICAgICAgICAgYUNsb25lZC5wdXNoKCBhb09yaWdpbmFsW2ldW2pdLmNlbGwgKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgYVJvdy5wdXNoKCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgImNlbGwiOiBuQ2xvbmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgInVuaXF1ZSI6IGFvT3JpZ2luYWxbaV1bal0udW5pcXVlDQogICAgICAgICAgICAgICAgICAgICAgICB9ICk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBhUm93LnB1c2goIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2VsbCI6IGFDbG9uZXNbIGlDbG9uZWQgXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5pcXVlIjogYW9PcmlnaW5hbFtpXVtqXS51bmlxdWUNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGFSZXR1cm4ucHVzaCggYVJvdyApOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gYVJldHVybjsNCiAgICAgICAgfSwNCg0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBDbG9uZSB0aGUgRGF0YVRhYmxlIG5vZGVzIGFuZCBwbGFjZSB0aGVtIGluIHRoZSBET00gKHNpemVkIGNvcnJlY3RseSkNCiAgICAgICAgICogIEByZXR1cm5zIHt2b2lkfQ0KICAgICAgICAgKiAgQHBhcmFtICAge09iamVjdH0gb0Nsb25lIE9iamVjdCBjb250YWluaW5nIHRoZSBoZWFkZXIsIGZvb3RlciBhbmQgYm9keSBjbG9uZWQgRE9NIGVsZW1lbnRzDQogICAgICAgICAqICBAcGFyYW0gICB7T2JqZWN0fSBvR3JpZCBHcmlkIG9iamVjdCBjb250YWluaW5nIHRoZSBkaXNwbGF5IGdyaWQgZWxlbWVudHMgZm9yIHRoZSBjbG9uZWQNCiAgICAgICAgICogICAgICAgICAgICAgICAgICAgIGNvbHVtbiAobGVmdCBvciByaWdodCkNCiAgICAgICAgICogIEBwYXJhbSAgIHtBcnJheX0gYWlDb2x1bW5zIENvbHVtbiBpbmRleGVzIHdoaWNoIHNob3VsZCBiZSBvcGVyYXRlZCBvbiBmcm9tIHRoZSBEYXRhVGFibGUNCiAgICAgICAgICogIEBwYXJhbSAgIHtCb29sZWFufSBiQWxsIEluZGljYXRlIGlmIHRoZSBoZWFkZXIgYW5kIGZvb3RlciBzaG91bGQgYmUgdXBkYXRlZCBhcyB3ZWxsICh0cnVlKQ0KICAgICAgICAgKiAgQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgICJfZm5DbG9uZSI6IGZ1bmN0aW9uICggb0Nsb25lLCBvR3JpZCwgYWlDb2x1bW5zLCBiQWxsICkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLA0KICAgICAgICAgICAgICAgIGksIGlMZW4sIGosIGpMZW4sIGpxLCBuVGFyZ2V0LCBpQ29sdW1uLCBuQ2xvbmUsIGlJbmRleCwgYW9DbG9uZUxheW91dCwNCiAgICAgICAgICAgICAgICBqcUNsb25lVGhlYWQsIGFvRml4ZWRIZWFkZXIsDQogICAgICAgICAgICAgICAgZHQgPSB0aGlzLnMuZHQ7DQoNCiAgICAgICAgICAgIC8qDQogICAgICAgICAgICAgKiBIZWFkZXINCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgaWYgKCBiQWxsICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAkKG9DbG9uZS5oZWFkZXIpLnJlbW92ZSgpOw0KDQogICAgICAgICAgICAgICAgb0Nsb25lLmhlYWRlciA9ICQodGhpcy5kb20uaGVhZGVyKS5jbG9uZSh0cnVlLCBmYWxzZSlbMF07DQogICAgICAgICAgICAgICAgb0Nsb25lLmhlYWRlci5jbGFzc05hbWUgKz0gIiBEVEZDX0Nsb25lZCI7DQogICAgICAgICAgICAgICAgb0Nsb25lLmhlYWRlci5zdHlsZS53aWR0aCA9ICIxMDAlIjsNCiAgICAgICAgICAgICAgICBvR3JpZC5oZWFkLmFwcGVuZENoaWxkKCBvQ2xvbmUuaGVhZGVyICk7DQoNCiAgICAgICAgICAgICAgICAvKiBDb3B5IHRoZSBEYXRhVGFibGVzIGxheW91dCBjYWNoZSBmb3IgdGhlIGhlYWRlciBmb3Igb3VyIGZsb2F0aW5nIGNvbHVtbiAqLw0KICAgICAgICAgICAgICAgIGFvQ2xvbmVMYXlvdXQgPSB0aGlzLl9mbkNvcHlMYXlvdXQoIGR0LmFvSGVhZGVyLCBhaUNvbHVtbnMsIHRydWUgKTsNCiAgICAgICAgICAgICAgICBqcUNsb25lVGhlYWQgPSAkKCc+dGhlYWQnLCBvQ2xvbmUuaGVhZGVyKTsNCiAgICAgICAgICAgICAgICBqcUNsb25lVGhlYWQuZW1wdHkoKTsNCg0KICAgICAgICAgICAgICAgIC8qIEFkZCB0aGUgY3JlYXRlZCBjbG9uZWQgVFIgZWxlbWVudHMgdG8gdGhlIHRhYmxlICovDQogICAgICAgICAgICAgICAgZm9yICggaT0wLCBpTGVuPWFvQ2xvbmVMYXlvdXQubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGpxQ2xvbmVUaGVhZFswXS5hcHBlbmRDaGlsZCggYW9DbG9uZUxheW91dFtpXS5uVHIgKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvKiBVc2UgdGhlIGhhbmR5IF9mbkRyYXdIZWFkIGZ1bmN0aW9uIGluIERhdGFUYWJsZXMgdG8gZG8gdGhlIHJvd3NwYW4vY29sc3Bhbg0KICAgICAgICAgICAgICAgICAqIGNhbGN1bGF0aW9ucyBmb3IgdXMNCiAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICBkdC5vQXBpLl9mbkRyYXdIZWFkKCBkdCwgYW9DbG9uZUxheW91dCwgdHJ1ZSApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8qIFRvIGVuc3VyZSB0aGF0IHdlIGNvcHkgY2VsbCBjbGFzc2VzIGV4YWN0bHksIHJlZ2FyZGxlc3Mgb2YgY29sc3BhbiwgbXVsdGlwbGUgcm93cw0KICAgICAgICAgICAgICAgICAqIGV0Yywgd2UgbWFrZSBhIGNvcHkgb2YgdGhlIGhlYWRlciBmcm9tIHRoZSBEYXRhVGFibGUgYWdhaW4sIGJ1dCBkb24ndCBpbnNlcnQgdGhlDQogICAgICAgICAgICAgICAgICogY2xvbmVkIGNlbGxzLCBqdXN0IGNvcHkgdGhlIGNsYXNzZXMgYWNyb3NzLiBUbyBnZXQgdGhlIG1hdGNoaW5nIGxheW91dCBmb3IgdGhlDQogICAgICAgICAgICAgICAgICogZml4ZWQgY29tcG9uZW50LCB3ZSB1c2UgdGhlIERhdGFUYWJsZXMgX2ZuRGV0ZWN0SGVhZGVyIG1ldGhvZCwgYWxsb3dpbmcgMToxIG1hcHBpbmcNCiAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICBhb0Nsb25lTGF5b3V0ID0gdGhpcy5fZm5Db3B5TGF5b3V0KCBkdC5hb0hlYWRlciwgYWlDb2x1bW5zLCBmYWxzZSApOw0KICAgICAgICAgICAgICAgIGFvRml4ZWRIZWFkZXI9W107DQoNCiAgICAgICAgICAgICAgICBkdC5vQXBpLl9mbkRldGVjdEhlYWRlciggYW9GaXhlZEhlYWRlciwgJCgnPnRoZWFkJywgb0Nsb25lLmhlYWRlcilbMF0gKTsNCg0KICAgICAgICAgICAgICAgIGZvciAoIGk9MCwgaUxlbj1hb0Nsb25lTGF5b3V0Lmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKCBqPTAsIGpMZW49YW9DbG9uZUxheW91dFtpXS5sZW5ndGggOyBqPGpMZW4gOyBqKysgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBhb0ZpeGVkSGVhZGVyW2ldW2pdLmNlbGwuY2xhc3NOYW1lID0gYW9DbG9uZUxheW91dFtpXVtqXS5jZWxsLmNsYXNzTmFtZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgalF1ZXJ5IFVJIHRoZW1pbmcgaXMgdXNlZCB3ZSBuZWVkIHRvIGNvcHkgdGhvc2UgZWxlbWVudHMgYXMgd2VsbA0KICAgICAgICAgICAgICAgICAgICAgICAgJCgnc3Bhbi5EYXRhVGFibGVzX3NvcnRfaWNvbicsIGFvRml4ZWRIZWFkZXJbaV1bal0uY2VsbCkuZWFjaCggZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gJCgnc3Bhbi5EYXRhVGFibGVzX3NvcnRfaWNvbicsIGFvQ2xvbmVMYXlvdXRbaV1bal0uY2VsbClbMF0uY2xhc3NOYW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5fZm5FcXVhbGlzZUhlaWdodHMoICd0aGVhZCcsIHRoaXMuZG9tLmhlYWRlciwgb0Nsb25lLmhlYWRlciApOw0KDQogICAgICAgICAgICAvKg0KICAgICAgICAgICAgICogQm9keQ0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBpZiAoIHRoaXMucy5zSGVpZ2h0TWF0Y2ggPT0gJ2F1dG8nICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvKiBSZW1vdmUgYW55IGhlaWdodHMgd2hpY2ggaGF2ZSBiZWVuIGFwcGxpZWQgYWxyZWFkeSBhbmQgbGV0IHRoZSBicm93c2VyIGZpZ3VyZSBpdCBvdXQgKi8NCiAgICAgICAgICAgICAgICAkKCc+dGJvZHk+dHInLCB0aGF0LmRvbS5ib2R5KS5jc3MoJ2hlaWdodCcsICdhdXRvJyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICggb0Nsb25lLmJvZHkgIT09IG51bGwgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICQob0Nsb25lLmJvZHkpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgIG9DbG9uZS5ib2R5ID0gbnVsbDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgb0Nsb25lLmJvZHkgPSAkKHRoaXMuZG9tLmJvZHkpLmNsb25lKHRydWUpWzBdOw0KICAgICAgICAgICAgb0Nsb25lLmJvZHkuY2xhc3NOYW1lICs9ICIgRFRGQ19DbG9uZWQiOw0KICAgICAgICAgICAgb0Nsb25lLmJvZHkuc3R5bGUucGFkZGluZ0JvdHRvbSA9IGR0Lm9TY3JvbGwuaUJhcldpZHRoKyJweCI7DQogICAgICAgICAgICBvQ2xvbmUuYm9keS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAoZHQub1Njcm9sbC5pQmFyV2lkdGgqMikrInB4IjsgLyogRm9yIElFICovDQogICAgICAgICAgICBpZiAoIG9DbG9uZS5ib2R5LmdldEF0dHJpYnV0ZSgnaWQnKSAhPT0gbnVsbCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgb0Nsb25lLmJvZHkucmVtb3ZlQXR0cmlidXRlKCdpZCcpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkKCc+dGhlYWQ+dHInLCBvQ2xvbmUuYm9keSkuZW1wdHkoKTsNCiAgICAgICAgICAgICQoJz50Zm9vdCcsIG9DbG9uZS5ib2R5KS5yZW1vdmUoKTsNCg0KICAgICAgICAgICAgdmFyIG5Cb2R5ID0gJCgndGJvZHknLCBvQ2xvbmUuYm9keSlbMF07DQogICAgICAgICAgICAkKG5Cb2R5KS5lbXB0eSgpOw0KICAgICAgICAgICAgaWYgKCBkdC5haURpc3BsYXkubGVuZ3RoID4gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLyogQ29weSB0aGUgRGF0YVRhYmxlcycgaGVhZGVyIGVsZW1lbnRzIHRvIGZvcmNlIHRoZSBjb2x1bW4gd2lkdGggaW4gZXhhY3RseSB0aGUNCiAgICAgICAgICAgICAgICAgKiBzYW1lIHdheSB0aGF0IERhdGFUYWJsZXMgZG9lcyBpdCAtIGhhdmUgdGhlIGhlYWRlciBlbGVtZW50LCBhcHBseSB0aGUgd2lkdGggYW5kDQogICAgICAgICAgICAgICAgICogY29sYXBzZSBpdCBkb3duDQogICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgdmFyIG5Jbm5lclRoZWFkID0gJCgnPnRoZWFkPnRyJywgb0Nsb25lLmJvZHkpWzBdOw0KICAgICAgICAgICAgICAgIGZvciAoIGlJbmRleD0wIDsgaUluZGV4PGFpQ29sdW1ucy5sZW5ndGggOyBpSW5kZXgrKyApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpQ29sdW1uID0gYWlDb2x1bW5zW2lJbmRleF07DQoNCiAgICAgICAgICAgICAgICAgICAgbkNsb25lID0gJChkdC5hb0NvbHVtbnNbaUNvbHVtbl0ublRoKS5jbG9uZSh0cnVlKVswXTsNCiAgICAgICAgICAgICAgICAgICAgbkNsb25lLmlubmVySFRNTCA9ICIiOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBvU3R5bGUgPSBuQ2xvbmUuc3R5bGU7DQogICAgICAgICAgICAgICAgICAgIG9TdHlsZS5wYWRkaW5nVG9wID0gIjAiOw0KICAgICAgICAgICAgICAgICAgICBvU3R5bGUucGFkZGluZ0JvdHRvbSA9ICIwIjsNCiAgICAgICAgICAgICAgICAgICAgb1N0eWxlLmJvcmRlclRvcFdpZHRoID0gIjAiOw0KICAgICAgICAgICAgICAgICAgICBvU3R5bGUuYm9yZGVyQm90dG9tV2lkdGggPSAiMCI7DQogICAgICAgICAgICAgICAgICAgIG9TdHlsZS5oZWlnaHQgPSAwOw0KICAgICAgICAgICAgICAgICAgICBvU3R5bGUud2lkdGggPSB0aGF0LnMuYWlJbm5lcldpZHRoc1tpQ29sdW1uXSsicHgiOw0KDQogICAgICAgICAgICAgICAgICAgIG5Jbm5lclRoZWFkLmFwcGVuZENoaWxkKCBuQ2xvbmUgKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvKiBBZGQgaW4gdGhlIHRib2R5IGVsZW1lbnRzLCBjbG9uaW5nIGZvcm0gdGhlIG1hc3RlciB0YWJsZSAqLw0KICAgICAgICAgICAgICAgICQoJz50Ym9keT50cicsIHRoYXQuZG9tLmJvZHkpLmVhY2goIGZ1bmN0aW9uICh6KSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhhdC5zLmR0Lm9GZWF0dXJlcy5iU2VydmVyU2lkZT09PWZhbHNlID8NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucy5kdC5haURpc3BsYXlbIHRoYXQucy5kdC5faURpc3BsYXlTdGFydCt6IF0gOiB6Ow0KDQogICAgICAgICAgICAgICAgICAgIHZhciBhVGRzOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChpID49IHRoYXQucy5kdC5hb0RhdGEubGVuZ3RoIHx8IF8uaXNVbmRlZmluZWQodGhhdC5zLmR0LmFvRGF0YVsgaSBdLmFuQ2VsbHMpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYVRkcyA9IHRoYXQucy5kdC5hb0RhdGFbIGkgLSAxIF0uYW5DZWxsczsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFUZHMgPSAkKHRoaXMpLmNoaWxkcmVuKCd0ZCwgdGgnKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgYVRkcyA9IHRoYXQucy5kdC5hb0RhdGFbIGkgXS5hbkNlbGxzOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5jbG9uZU5vZGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBuLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTsNCiAgICAgICAgICAgICAgICAgICAgbi5zZXRBdHRyaWJ1dGUoICdkYXRhLWR0LXJvdycsIGkgKTsNCg0KICAgICAgICAgICAgICAgICAgICBmb3IgKCBpSW5kZXg9MCA7IGlJbmRleDxhaUNvbHVtbnMubGVuZ3RoIDsgaUluZGV4KysgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBpQ29sdW1uID0gYWlDb2x1bW5zW2lJbmRleF07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYVRkcy5sZW5ndGggPiAwICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuQ2xvbmUgPSAkKCBhVGRzW2lDb2x1bW5dICkuY2xvbmUodHJ1ZSwgdHJ1ZSlbMF07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbkNsb25lLnNldEF0dHJpYnV0ZSggJ2RhdGEtZHQtcm93JywgaSApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5DbG9uZS5zZXRBdHRyaWJ1dGUoICdkYXRhLWR0LWNvbHVtbicsIGR0Lm9BcGkuX2ZuVmlzaWJsZVRvQ29sdW1uSW5kZXgoIGR0LCBpQ29sdW1uICkgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmFwcGVuZENoaWxkKCBuQ2xvbmUgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBuQm9keS5hcHBlbmRDaGlsZCggbiApOw0KICAgICAgICAgICAgICAgIH0gKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAkKCc+dGJvZHk+dHInLCB0aGF0LmRvbS5ib2R5KS5lYWNoKCBmdW5jdGlvbiAoeikgew0KICAgICAgICAgICAgICAgICAgICBuQ2xvbmUgPSB0aGlzLmNsb25lTm9kZSh0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgbkNsb25lLmNsYXNzTmFtZSArPSAnIERURkNfTm9EYXRhJzsNCiAgICAgICAgICAgICAgICAgICAgJCgndGQnLCBuQ2xvbmUpLmh0bWwoJycpOw0KICAgICAgICAgICAgICAgICAgICBuQm9keS5hcHBlbmRDaGlsZCggbkNsb25lICk7DQogICAgICAgICAgICAgICAgfSApOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBvQ2xvbmUuYm9keS5zdHlsZS53aWR0aCA9ICIxMDAlIjsNCiAgICAgICAgICAgIG9DbG9uZS5ib2R5LnN0eWxlLm1hcmdpbiA9ICIwIjsNCiAgICAgICAgICAgIG9DbG9uZS5ib2R5LnN0eWxlLnBhZGRpbmcgPSAiMCI7DQoNCiAgICAgICAgICAgIC8vIEludGVyb3Agd2l0aCBTY3JvbGxlciAtIG5lZWQgdG8gdXNlIGEgaGVpZ2h0IGZvcmNpbmcgZWxlbWVudCBpbiB0aGUNCiAgICAgICAgICAgIC8vIHNjcm9sbGluZyBhcmVhIGluIHRoZSBzYW1lIHdheSB0aGF0IFNjcm9sbGVyIGRvZXMgaW4gdGhlIGJvZHkgc2Nyb2xsLg0KICAgICAgICAgICAgaWYgKCBkdC5vU2Nyb2xsZXIgIT09IHVuZGVmaW5lZCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHNjcm9sbGVyRm9yY2VyID0gZHQub1Njcm9sbGVyLmRvbS5mb3JjZTsNCg0KICAgICAgICAgICAgICAgIGlmICggISBvR3JpZC5mb3JjZXIgKSB7DQogICAgICAgICAgICAgICAgICAgIG9HcmlkLmZvcmNlciA9IHNjcm9sbGVyRm9yY2VyLmNsb25lTm9kZSggdHJ1ZSApOw0KICAgICAgICAgICAgICAgICAgICBvR3JpZC5saW5lci5hcHBlbmRDaGlsZCggb0dyaWQuZm9yY2VyICk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBvR3JpZC5mb3JjZXIuc3R5bGUuaGVpZ2h0ID0gc2Nyb2xsZXJGb3JjZXIuc3R5bGUuaGVpZ2h0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgb0dyaWQubGluZXIuYXBwZW5kQ2hpbGQoIG9DbG9uZS5ib2R5ICk7DQoNCiAgICAgICAgICAgIHRoaXMuX2ZuRXF1YWxpc2VIZWlnaHRzKCAndGJvZHknLCB0aGF0LmRvbS5ib2R5LCBvQ2xvbmUuYm9keSApOw0KDQogICAgICAgICAgICAvKg0KICAgICAgICAgICAgICogRm9vdGVyDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGlmICggZHQublRGb290ICE9PSBudWxsICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoIGJBbGwgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCBvQ2xvbmUuZm9vdGVyICE9PSBudWxsICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb0Nsb25lLmZvb3Rlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBvQ2xvbmUuZm9vdGVyICk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgb0Nsb25lLmZvb3RlciA9ICQodGhpcy5kb20uZm9vdGVyKS5jbG9uZSh0cnVlLCB0cnVlKVswXTsNCiAgICAgICAgICAgICAgICAgICAgb0Nsb25lLmZvb3Rlci5jbGFzc05hbWUgKz0gIiBEVEZDX0Nsb25lZCI7DQogICAgICAgICAgICAgICAgICAgIG9DbG9uZS5mb290ZXIuc3R5bGUud2lkdGggPSAiMTAwJSI7DQogICAgICAgICAgICAgICAgICAgIG9HcmlkLmZvb3QuYXBwZW5kQ2hpbGQoIG9DbG9uZS5mb290ZXIgKTsNCg0KICAgICAgICAgICAgICAgICAgICAvKiBDb3B5IHRoZSBmb290ZXIganVzdCBsaWtlIHdlIGRvIGZvciB0aGUgaGVhZGVyICovDQogICAgICAgICAgICAgICAgICAgIGFvQ2xvbmVMYXlvdXQgPSB0aGlzLl9mbkNvcHlMYXlvdXQoIGR0LmFvRm9vdGVyLCBhaUNvbHVtbnMsIHRydWUgKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGpxQ2xvbmVUZm9vdCA9ICQoJz50Zm9vdCcsIG9DbG9uZS5mb290ZXIpOw0KICAgICAgICAgICAgICAgICAgICBqcUNsb25lVGZvb3QuZW1wdHkoKTsNCg0KICAgICAgICAgICAgICAgICAgICBmb3IgKCBpPTAsIGlMZW49YW9DbG9uZUxheW91dC5sZW5ndGggOyBpPGlMZW4gOyBpKysgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBqcUNsb25lVGZvb3RbMF0uYXBwZW5kQ2hpbGQoIGFvQ2xvbmVMYXlvdXRbaV0ublRyICk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZHQub0FwaS5fZm5EcmF3SGVhZCggZHQsIGFvQ2xvbmVMYXlvdXQsIHRydWUgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgYW9DbG9uZUxheW91dCA9IHRoaXMuX2ZuQ29weUxheW91dCggZHQuYW9Gb290ZXIsIGFpQ29sdW1ucywgZmFsc2UgKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFvQ3VyckZvb3Rlcj1bXTsNCg0KICAgICAgICAgICAgICAgICAgICBkdC5vQXBpLl9mbkRldGVjdEhlYWRlciggYW9DdXJyRm9vdGVyLCAkKCc+dGZvb3QnLCBvQ2xvbmUuZm9vdGVyKVswXSApOw0KDQogICAgICAgICAgICAgICAgICAgIGZvciAoIGk9MCwgaUxlbj1hb0Nsb25lTGF5b3V0Lmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIGo9MCwgakxlbj1hb0Nsb25lTGF5b3V0W2ldLmxlbmd0aCA7IGo8akxlbiA7IGorKyApDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW9DdXJyRm9vdGVyW2ldW2pdLmNlbGwuY2xhc3NOYW1lID0gYW9DbG9uZUxheW91dFtpXVtqXS5jZWxsLmNsYXNzTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLl9mbkVxdWFsaXNlSGVpZ2h0cyggJ3Rmb290JywgdGhpcy5kb20uZm9vdGVyLCBvQ2xvbmUuZm9vdGVyICk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8qIEVxdWFsaXNlIHRoZSBjb2x1bW4gd2lkdGhzIGJldHdlZW4gdGhlIGhlYWRlciBmb290ZXIgYW5kIGJvZHkgLSBib2R5IGdldCdzIHByaW9yaXR5ICovDQogICAgICAgICAgICB2YXIgYW5VbmlxdWUgPSBkdC5vQXBpLl9mbkdldFVuaXF1ZVRocyggZHQsICQoJz50aGVhZCcsIG9DbG9uZS5oZWFkZXIpWzBdICk7DQogICAgICAgICAgICAkKGFuVW5pcXVlKS5lYWNoKCBmdW5jdGlvbiAoaSkgew0KICAgICAgICAgICAgICAgIGlDb2x1bW4gPSBhaUNvbHVtbnNbaV07DQogICAgICAgICAgICAgICAgdGhpcy5zdHlsZS53aWR0aCA9IHRoYXQucy5haUlubmVyV2lkdGhzW2lDb2x1bW5dKyJweCI7DQogICAgICAgICAgICB9ICk7DQoNCiAgICAgICAgICAgIGlmICggdGhhdC5zLmR0Lm5URm9vdCAhPT0gbnVsbCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYW5VbmlxdWUgPSBkdC5vQXBpLl9mbkdldFVuaXF1ZVRocyggZHQsICQoJz50Zm9vdCcsIG9DbG9uZS5mb290ZXIpWzBdICk7DQogICAgICAgICAgICAgICAgJChhblVuaXF1ZSkuZWFjaCggZnVuY3Rpb24gKGkpIHsNCiAgICAgICAgICAgICAgICAgICAgaUNvbHVtbiA9IGFpQ29sdW1uc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS53aWR0aCA9IHRoYXQucy5haUlubmVyV2lkdGhzW2lDb2x1bW5dKyJweCI7DQogICAgICAgICAgICAgICAgfSApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEZyb20gYSBnaXZlbiB0YWJsZSBub2RlIChUSEVBRCBldGMpLCBnZXQgYSBsaXN0IG9mIFRSIGRpcmVjdCBjaGlsZCBlbGVtZW50cw0KICAgICAgICAgKiAgQHBhcmFtICAge05vZGV9IG5JbiBUYWJsZSBlbGVtZW50IHRvIHNlYXJjaCBmb3IgVFIgZWxlbWVudHMgKFRIRUFELCBUQk9EWSBvciBURk9PVCBlbGVtZW50KQ0KICAgICAgICAgKiAgQHJldHVybnMge0FycmF5fSBMaXN0IG9mIFRSIGVsZW1lbnRzIGZvdW5kDQogICAgICAgICAqICBAcHJpdmF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgIl9mbkdldFRyTm9kZXMiOiBmdW5jdGlvbiAoIG5JbiApDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBhT3V0ID0gW107DQogICAgICAgICAgICBmb3IgKCB2YXIgaT0wLCBpTGVuPW5Jbi5jaGlsZE5vZGVzLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKCBuSW4uY2hpbGROb2Rlc1tpXS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09ICJUUiIgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgYU91dC5wdXNoKCBuSW4uY2hpbGROb2Rlc1tpXSApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBhT3V0Ow0KICAgICAgICB9LA0KDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEVxdWFsaXNlIHRoZSBoZWlnaHRzIG9mIHRoZSByb3dzIGluIGEgZ2l2ZW4gdGFibGUgbm9kZSBpbiBhIGNyb3NzIGJyb3dzZXIgd2F5DQogICAgICAgICAqICBAcmV0dXJucyB7dm9pZH0NCiAgICAgICAgICogIEBwYXJhbSAgIHtTdHJpbmd9IG5vZGVOYW1lIE5vZGUgdHlwZSAtIHRoZWFkLCB0Ym9keSBvciB0Zm9vdA0KICAgICAgICAgKiAgQHBhcmFtICAge05vZGV9IG9yaWdpbmFsIE9yaWdpbmFsIG5vZGUgdG8gdGFrZSB0aGUgaGVpZ2h0cyBmcm9tDQogICAgICAgICAqICBAcGFyYW0gICB7Tm9kZX0gY2xvbmUgQ29weSB0aGUgaGVpZ2h0cyB0bw0KICAgICAgICAgKiAgQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgICJfZm5FcXVhbGlzZUhlaWdodHMiOiBmdW5jdGlvbiAoIG5vZGVOYW1lLCBvcmlnaW5hbCwgY2xvbmUgKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIHRoaXMucy5zSGVpZ2h0TWF0Y2ggPT0gJ25vbmUnICYmIG5vZGVOYW1lICE9PSAndGhlYWQnICYmIG5vZGVOYW1lICE9PSAndGZvb3QnICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywNCiAgICAgICAgICAgICAgICBpLCBpTGVuLCBpSGVpZ2h0LCBpSGVpZ2h0MiwgaUhlaWdodE9yaWdpbmFsLCBpSGVpZ2h0Q2xvbmUsDQogICAgICAgICAgICAgICAgcm9vdE9yaWdpbmFsID0gb3JpZ2luYWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUobm9kZU5hbWUpWzBdLA0KICAgICAgICAgICAgICAgIHJvb3RDbG9uZSAgICA9IGNsb25lLmdldEVsZW1lbnRzQnlUYWdOYW1lKG5vZGVOYW1lKVswXSwNCiAgICAgICAgICAgICAgICBqcUJveEhhY2sgICAgPSAkKCc+Jytub2RlTmFtZSsnPnRyOmVxKDApJywgb3JpZ2luYWwpLmNoaWxkcmVuKCc6Zmlyc3QnKSwNCiAgICAgICAgICAgICAgICBpQm94SGFjayAgICAgPSBqcUJveEhhY2sub3V0ZXJIZWlnaHQoKSAtIGpxQm94SGFjay5oZWlnaHQoKSwNCiAgICAgICAgICAgICAgICBhbk9yaWdpbmFsICAgPSB0aGlzLl9mbkdldFRyTm9kZXMoIHJvb3RPcmlnaW5hbCApLA0KICAgICAgICAgICAgICAgIGFuQ2xvbmUgICAgICA9IHRoaXMuX2ZuR2V0VHJOb2Rlcyggcm9vdENsb25lICksDQogICAgICAgICAgICAgICAgaGVpZ2h0cyAgICAgID0gW107DQoNCiAgICAgICAgICAgIGZvciAoIGk9MCwgaUxlbj1hbkNsb25lLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaUhlaWdodE9yaWdpbmFsID0gYW5PcmlnaW5hbFtpXS5vZmZzZXRIZWlnaHQ7DQogICAgICAgICAgICAgICAgaUhlaWdodENsb25lID0gYW5DbG9uZVtpXS5vZmZzZXRIZWlnaHQ7DQogICAgICAgICAgICAgICAgaUhlaWdodCA9IGlIZWlnaHRDbG9uZSA+IGlIZWlnaHRPcmlnaW5hbCA/IGlIZWlnaHRDbG9uZSA6IGlIZWlnaHRPcmlnaW5hbDsNCg0KICAgICAgICAgICAgICAgIGlmICggdGhpcy5zLnNIZWlnaHRNYXRjaCA9PSAnc2VtaWF1dG8nICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGFuT3JpZ2luYWxbaV0uX0RUVENfaUhlaWdodCA9IGlIZWlnaHQ7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaGVpZ2h0cy5wdXNoKCBpSGVpZ2h0ICk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGZvciAoIGk9MCwgaUxlbj1hbkNsb25lLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYW5DbG9uZVtpXS5zdHlsZS5oZWlnaHQgPSBoZWlnaHRzW2ldKyJweCI7DQogICAgICAgICAgICAgICAgYW5PcmlnaW5hbFtpXS5zdHlsZS5oZWlnaHQgPSBoZWlnaHRzW2ldKyJweCI7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIERldGVybWluZSBpZiB0aGUgVUEgc3VmZmVycyBmcm9tIEZpcmVmb3gncyBvdmVyZmxvdzpzY3JvbGwgc2Nyb2xsYmFycw0KICAgICAgICAgKiBub3QgYmVpbmcgc2hvd24gYnVnLg0KICAgICAgICAgKg0KICAgICAgICAgKiBGaXJlZm94IGRvZXNuJ3QgZHJhdyBzY3JvbGxiYXJzLCBldmVuIGlmIGl0IGlzIHRvbGQgdG8gdXNpbmcNCiAgICAgICAgICogb3ZlcmZsb3c6c2Nyb2xsLCBpZiB0aGUgZGl2IGlzIGxlc3MgdGhhbiAzNHB4IGhlaWdodC4gU2VlIGJ1Z3MgMjkyMjg0IGFuZA0KICAgICAgICAgKiA3ODE4ODUuIFVzaW5nIFVBIGRldGVjdGlvbiBoZXJlIHNpbmNlIHRoaXMgaXMgcGFydGljdWxhcmx5IGhhcmQgdG8gZGV0ZWN0DQogICAgICAgICAqIHVzaW5nIG9iamVjdHMgLSBpdHMgYSBzdHJhaWdodCB1cCByZW5kZXJpbmcgZXJyb3IgaW4gRmlyZWZveC4NCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBGaXJlZm94IGVycm9yIGlzIHByZXNlbnQsIGZhbHNlIG90aGVyd2lzZQ0KICAgICAgICAgKi8NCiAgICAgICAgX2ZpcmVmb3hTY3JvbGxFcnJvcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCBfZmlyZWZveFNjcm9sbCA9PT0gdW5kZWZpbmVkICkgew0KICAgICAgICAgICAgICAgIHZhciB0ZXN0ID0gJCgnPGRpdi8+JykNCiAgICAgICAgICAgICAgICAgICAgLmNzcyggew0KICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsDQogICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1MCwNCiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnc2Nyb2xsJw0KICAgICAgICAgICAgICAgICAgICB9ICkNCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKCAnYm9keScgKTsNCg0KICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIGRvZXNuJ3QgYXBwbHkgb24gTWFjcyB3aXRoIDAgd2lkdGggc2Nyb2xsYmFycw0KICAgICAgICAgICAgICAgIF9maXJlZm94U2Nyb2xsID0gKA0KICAgICAgICAgICAgICAgICAgICB0ZXN0WzBdLmNsaWVudFdpZHRoID09PSB0ZXN0WzBdLm9mZnNldFdpZHRoICYmIHRoaXMuX2ZuRFRPdmVyZmxvdygpLmJhciAhPT0gMA0KICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgICAgICB0ZXN0LnJlbW92ZSgpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gX2ZpcmVmb3hTY3JvbGw7DQogICAgICAgIH0NCiAgICB9ICk7DQoNCg0KDQogICAgLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICogU3RhdGljcw0KICAgICAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8NCg0KICAgIC8qKg0KICAgICAqIEZpeGVkQ29sdW1ucyBkZWZhdWx0IHNldHRpbmdzIGZvciBpbml0aWFsaXNhdGlvbg0KICAgICAqICBAbmFtZSBGaXhlZENvbHVtbnMuZGVmYXVsdHMNCiAgICAgKiAgQG5hbWVzcGFjZQ0KICAgICAqICBAc3RhdGljDQogICAgICovDQogICAgRml4ZWRDb2x1bW5zLmRlZmF1bHRzID0gLyoqIEBsZW5kcyBGaXhlZENvbHVtbnMuZGVmYXVsdHMgKi97DQogICAgICAgIC8qKg0KICAgICAgICAgKiBOdW1iZXIgb2YgbGVmdCBoYW5kIGNvbHVtbnMgdG8gZml4IGluIHBvc2l0aW9uDQogICAgICAgICAqICBAdHlwZSAgICAgaW50DQogICAgICAgICAqICBAZGVmYXVsdCAgMQ0KICAgICAgICAgKiAgQHN0YXRpYw0KICAgICAgICAgKiAgQGV4YW1wbGUNCiAgICAgICAgICogICAgICB2YXIgID0gJCgnI2V4YW1wbGUnKS5kYXRhVGFibGUoIHsNCgkgKiAgICAgICAgICAic2Nyb2xsWCI6ICIxMDAlIg0KCSAqICAgICAgfSApOw0KICAgICAgICAgKiAgICAgIG5ldyAkLmZuLmRhdGFUYWJsZS5maXhlZENvbHVtbnMoIHRhYmxlLCB7DQoJICogICAgICAgICAgImxlZnRDb2x1bW5zIjogMg0KCSAqICAgICAgfSApOw0KICAgICAgICAgKi8NCiAgICAgICAgImlMZWZ0Q29sdW1ucyI6IDEsDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIE51bWJlciBvZiByaWdodCBoYW5kIGNvbHVtbnMgdG8gZml4IGluIHBvc2l0aW9uDQogICAgICAgICAqICBAdHlwZSAgICAgaW50DQogICAgICAgICAqICBAZGVmYXVsdCAgMA0KICAgICAgICAgKiAgQHN0YXRpYw0KICAgICAgICAgKiAgQGV4YW1wbGUNCiAgICAgICAgICogICAgICB2YXIgdGFibGUgPSAkKCcjZXhhbXBsZScpLmRhdGFUYWJsZSggew0KCSAqICAgICAgICAgICJzY3JvbGxYIjogIjEwMCUiDQoJICogICAgICB9ICk7DQogICAgICAgICAqICAgICAgbmV3ICQuZm4uZGF0YVRhYmxlLmZpeGVkQ29sdW1ucyggdGFibGUsIHsNCgkgKiAgICAgICAgICAicmlnaHRDb2x1bW5zIjogMQ0KCSAqICAgICAgfSApOw0KICAgICAgICAgKi8NCiAgICAgICAgImlSaWdodENvbHVtbnMiOiAwLA0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBEcmF3IGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCB3aGVuIEZpeGVkQ29sdW1ucyBoYXMgcmVkcmF3biB0aGUgZml4ZWQgYXNzZXRzDQogICAgICAgICAqICBAdHlwZSAgICAgZnVuY3Rpb24ob2JqZWN0LCBvYmplY3QpOnZvaWQNCiAgICAgICAgICogIEBkZWZhdWx0ICBudWxsDQogICAgICAgICAqICBAc3RhdGljDQogICAgICAgICAqICBAZXhhbXBsZQ0KICAgICAgICAgKiAgICAgIHZhciB0YWJsZSA9ICQoJyNleGFtcGxlJykuZGF0YVRhYmxlKCB7DQoJICogICAgICAgICAgInNjcm9sbFgiOiAiMTAwJSINCgkgKiAgICAgIH0gKTsNCiAgICAgICAgICogICAgICBuZXcgJC5mbi5kYXRhVGFibGUuZml4ZWRDb2x1bW5zKCB0YWJsZSwgew0KCSAqICAgICAgICAgICJkcmF3Q2FsbGJhY2siOiBmdW5jdGlvbiAoKSB7DQoJICoJICAgICAgICAgICAgYWxlcnQoICJGaXhlZENvbHVtbnMgcmVkcmF3IiApOw0KCSAqCSAgICAgICAgfQ0KCSAqICAgICAgfSApOw0KICAgICAgICAgKi8NCiAgICAgICAgImZuRHJhd0NhbGxiYWNrIjogbnVsbCwNCg0KICAgICAgICAvKioNCiAgICAgICAgICogSGVpZ2h0IG1hdGNoaW5nIGFsZ29ydGhpbSB0byB1c2UuIFRoaXMgY2FuIGJlICJub25lIiB3aGljaCB3aWxsIHJlc3VsdCBpbiBubyBoZWlnaHQNCiAgICAgICAgICogbWF0Y2hpbmcgYmVpbmcgYXBwbGllZCBieSBGaXhlZENvbHVtbnMgKGhlaWdodCBtYXRjaGluZyBjb3VsZCBiZSBmb3JjZWQgYnkgQ1NTIGluIHRoaXMNCiAgICAgICAgICogY2FzZSksICJzZW1pYXV0byIgd2hlcmVieSB0aGUgaGVpZ2h0IGNhbGN1bGF0aW9uIHdpbGwgYmUgcGVyZm9ybWVkIG9uY2UsIGFuZCB0aGUgcmVzdWx0DQogICAgICAgICAqIGNhY2hlZCB0byBiZSB1c2VkIGFnYWluIChmblJlY2FsY3VsYXRlSGVpZ2h0IGNhbiBiZSB1c2VkIHRvIGZvcmNlIHJlY2FsY3VsYXRpb24pLCBvcg0KICAgICAgICAgKiAiYXV0byIgd2hlbiBoZWlnaHQgbWF0Y2hpbmcgaXMgcGVyZm9ybWVkIG9uIGV2ZXJ5IGRyYXcgKHNsb3dlc3QgYnV0IG11c3QgYWNjdXJhdGUpDQogICAgICAgICAqICBAdHlwZSAgICAgc3RyaW5nDQogICAgICAgICAqICBAZGVmYXVsdCAgc2VtaWF1dG8NCiAgICAgICAgICogIEBzdGF0aWMNCiAgICAgICAgICogIEBleGFtcGxlDQogICAgICAgICAqICAgICAgdmFyIHRhYmxlID0gJCgnI2V4YW1wbGUnKS5kYXRhVGFibGUoIHsNCgkgKiAgICAgICAgICAic2Nyb2xsWCI6ICIxMDAlIg0KCSAqICAgICAgfSApOw0KICAgICAgICAgKiAgICAgIG5ldyAkLmZuLmRhdGFUYWJsZS5maXhlZENvbHVtbnMoIHRhYmxlLCB7DQoJICogICAgICAgICAgImhlaWdodE1hdGNoIjogImF1dG8iDQoJICogICAgICB9ICk7DQogICAgICAgICAqLw0KICAgICAgICAic0hlaWdodE1hdGNoIjogInNlbWlhdXRvIg0KICAgIH07DQoNCg0KDQoNCiAgICAvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgKiBDb25zdGFudHMNCiAgICAgKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovDQoNCiAgICAvKioNCiAgICAgKiBGaXhlZENvbHVtbnMgdmVyc2lvbg0KICAgICAqICBAbmFtZSAgICAgIEZpeGVkQ29sdW1ucy52ZXJzaW9uDQogICAgICogIEB0eXBlICAgICAgU3RyaW5nDQogICAgICogIEBkZWZhdWx0ICAgU2VlIGNvZGUNCiAgICAgKiAgQHN0YXRpYw0KICAgICAqLw0KICAgIEZpeGVkQ29sdW1ucy52ZXJzaW9uID0gIjMuMi4zLWRldiI7DQoNCg0KDQogICAgLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICogRGF0YVRhYmxlcyBBUEkgaW50ZWdyYXRpb24NCiAgICAgKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovDQoNCiAgICBEYXRhVGFibGUuQXBpLnJlZ2lzdGVyKCAnZml4ZWRDb2x1bW5zKCknLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiB0aGlzOw0KICAgIH0gKTsNCg0KICAgIERhdGFUYWJsZS5BcGkucmVnaXN0ZXIoICdmaXhlZENvbHVtbnMoKS51cGRhdGUoKScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoICd0YWJsZScsIGZ1bmN0aW9uICggY3R4ICkgew0KICAgICAgICAgICAgaWYgKCBjdHguX29GaXhlZENvbHVtbnMgKSB7DQogICAgICAgICAgICAgICAgY3R4Ll9vRml4ZWRDb2x1bW5zLmZuVXBkYXRlKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0gKTsNCiAgICB9ICk7DQoNCiAgICBEYXRhVGFibGUuQXBpLnJlZ2lzdGVyKCAnZml4ZWRDb2x1bW5zKCkucmVsYXlvdXQoKScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoICd0YWJsZScsIGZ1bmN0aW9uICggY3R4ICkgew0KICAgICAgICAgICAgaWYgKCBjdHguX29GaXhlZENvbHVtbnMgKSB7DQogICAgICAgICAgICAgICAgY3R4Ll9vRml4ZWRDb2x1bW5zLmZuUmVkcmF3TGF5b3V0KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0gKTsNCiAgICB9ICk7DQoNCiAgICBEYXRhVGFibGUuQXBpLnJlZ2lzdGVyKCAncm93cygpLnJlY2FsY0hlaWdodCgpJywgZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvciggJ3JvdycsIGZ1bmN0aW9uICggY3R4LCBpZHggKSB7DQogICAgICAgICAgICBpZiAoIGN0eC5fb0ZpeGVkQ29sdW1ucyApIHsNCiAgICAgICAgICAgICAgICBjdHguX29GaXhlZENvbHVtbnMuZm5SZWNhbGN1bGF0ZUhlaWdodCggdGhpcy5yb3coaWR4KS5ub2RlKCkgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSApOw0KICAgIH0gKTsNCg0KICAgIERhdGFUYWJsZS5BcGkucmVnaXN0ZXIoICdmaXhlZENvbHVtbnMoKS5yb3dJbmRleCgpJywgZnVuY3Rpb24gKCByb3cgKSB7DQogICAgICAgIHJvdyA9ICQocm93KTsNCg0KICAgICAgICByZXR1cm4gcm93LnBhcmVudHMoJy5EVEZDX0Nsb25lZCcpLmxlbmd0aCA/DQogICAgICAgICAgICB0aGlzLnJvd3MoIHsgcGFnZTogJ2N1cnJlbnQnIH0gKS5pbmRleGVzKClbIHJvdy5pbmRleCgpIF0gOg0KICAgICAgICAgICAgdGhpcy5yb3coIHJvdyApLmluZGV4KCk7DQogICAgfSApOw0KDQogICAgRGF0YVRhYmxlLkFwaS5yZWdpc3RlciggJ2ZpeGVkQ29sdW1ucygpLmNlbGxJbmRleCgpJywgZnVuY3Rpb24gKCBjZWxsICkgew0KICAgICAgICBjZWxsID0gJChjZWxsKTsNCg0KICAgICAgICBpZiAoIGNlbGwucGFyZW50cygnLkRURkNfQ2xvbmVkJykubGVuZ3RoICkgew0KICAgICAgICAgICAgdmFyIHJvd0Nsb25lZElkeCA9IGNlbGwucGFyZW50KCkuaW5kZXgoKTsNCiAgICAgICAgICAgIHZhciByb3dJZHggPSB0aGlzLnJvd3MoIHsgcGFnZTogJ2N1cnJlbnQnIH0gKS5pbmRleGVzKClbIHJvd0Nsb25lZElkeCBdOw0KICAgICAgICAgICAgdmFyIGNvbHVtbklkeDsNCg0KICAgICAgICAgICAgaWYgKCBjZWxsLnBhcmVudHMoJy5EVEZDX0xlZnRXcmFwcGVyJykubGVuZ3RoICkgew0KICAgICAgICAgICAgICAgIGNvbHVtbklkeCA9IGNlbGwuaW5kZXgoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5jb2x1bW5zKCkuZmxhdHRlbigpLmxlbmd0aDsNCiAgICAgICAgICAgICAgICBjb2x1bW5JZHggPSBjb2x1bW5zIC0gdGhpcy5jb250ZXh0WzBdLl9vRml4ZWRDb2x1bW5zLnMuaVJpZ2h0Q29sdW1ucyArIGNlbGwuaW5kZXgoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICByb3c6IHJvd0lkeCwNCiAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uLmluZGV4KCAndG9EYXRhJywgY29sdW1uSWR4ICksDQogICAgICAgICAgICAgICAgY29sdW1uVmlzaWJsZTogY29sdW1uSWR4DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2VsbCggY2VsbCApLmluZGV4KCk7DQogICAgICAgIH0NCiAgICB9ICk7DQoNCg0KDQoNCiAgICAvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgKiBJbml0aWFsaXNhdGlvbg0KICAgICAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8NCg0KLy8gQXR0YWNoIGEgbGlzdGVuZXIgdG8gdGhlIGRvY3VtZW50IHdoaWNoIGxpc3RlbnMgZm9yIERhdGFUYWJsZXMgaW5pdGlhbGlzYXRpb24NCi8vIGV2ZW50cyBzbyB3ZSBjYW4gYXV0b21hdGljYWxseSBpbml0aWFsaXNlDQogICAgJChkb2N1bWVudCkub24oICdpbml0LmR0LmZpeGVkQ29sdW1ucycsIGZ1bmN0aW9uIChlLCBzZXR0aW5ncykgew0KICAgICAgICBpZiAoIGUubmFtZXNwYWNlICE9PSAnZHQnICkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGluaXQgPSBzZXR0aW5ncy5vSW5pdC5maXhlZENvbHVtbnM7DQogICAgICAgIHZhciBkZWZhdWx0cyA9IERhdGFUYWJsZS5kZWZhdWx0cy5maXhlZENvbHVtbnM7DQoNCiAgICAgICAgaWYgKCBpbml0IHx8IGRlZmF1bHRzICkgew0KICAgICAgICAgICAgdmFyIG9wdHMgPSAkLmV4dGVuZCgge30sIGluaXQsIGRlZmF1bHRzICk7DQoNCiAgICAgICAgICAgIGlmICggaW5pdCAhPT0gZmFsc2UgKSB7DQogICAgICAgICAgICAgICAgbmV3IEZpeGVkQ29sdW1ucyggc2V0dGluZ3MsIG9wdHMgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0gKTsNCg0KDQoNCi8vIE1ha2UgRml4ZWRDb2x1bW5zIGFjY2Vzc2libGUgZnJvbSB0aGUgRGF0YVRhYmxlcyBpbnN0YW5jZQ0KICAgICQuZm4uZGF0YVRhYmxlLkZpeGVkQ29sdW1ucyA9IEZpeGVkQ29sdW1uczsNCiAgICAkLmZuLkRhdGFUYWJsZS5GaXhlZENvbHVtbnMgPSBGaXhlZENvbHVtbnM7DQoNCiAgICByZXR1cm4gRml4ZWRDb2x1bW5zOw0KfSkpOwo=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="89277343" offset="0" length="4096" />
        <PacketInfo time="89277375" offset="4096" length="9112" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>