var _asset_pipeline_loaded_modules=_asset_pipeline_loaded_modules||{},_asset_pipeline_require=function(m){var l=_asset_pipeline_loaded_modules[m];if(void 0!=l)return l.exports;l=_asset_pipeline_modules[m];return void 0!=l?(_asset_pipeline_loaded_modules[m]=l(),_asset_pipeline_loaded_modules[m].exports):null},_asset_pipeline_modules=_asset_pipeline_modules||{};
_asset_pipeline_modules["backbone/underscore.js"]=function(){var m={exports:{}},l=m.exports;(function(){var h=this,y=h._,x=Array.prototype,p=Object.prototype,t=x.push,n=x.slice,r=x.concat,w=p.toString,A=p.hasOwnProperty,p=Array.isArray,z=Object.keys,H=Function.prototype.bind,b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=a};"undefined"!==typeof l?("undefined"!==typeof m&&m.exports&&(l=m.exports=b),l._=b):h._=b;b.VERSION="1.7.0";var v=function(a,d,b){if(void 0===
d)return a;switch(null==b?3:b){case 1:return function(b){return a.call(d,b)};case 2:return function(b,c){return a.call(d,b,c)};case 3:return function(b,c,g){return a.call(d,b,c,g)};case 4:return function(b,c,g,k){return a.call(d,b,c,g,k)}}return function(){return a.apply(d,arguments)}};b.iteratee=function(a,d,c){return null==a?b.identity:b.isFunction(a)?v(a,d,c):b.isObject(a)?b.matches(a):b.property(a)};b.each=b.forEach=function(a,d,c){if(null==a)return a;d=v(d,c);var e=a.length;if(e===+e)for(c=0;c<
e;c++)d(a[c],c,a);else{var f=b.keys(a);c=0;for(e=f.length;c<e;c++)d(a[f[c]],f[c],a)}return a};b.map=b.collect=function(a,d,c){if(null==a)return[];d=b.iteratee(d,c);c=a.length!==+a.length&&b.keys(a);for(var e=(c||a).length,f=Array(e),g,k=0;k<e;k++)g=c?c[k]:k,f[k]=d(a[g],g,a);return f};b.reduce=b.foldl=b.inject=function(a,d,c,e){null==a&&(a=[]);d=v(d,e,4);var f=a.length!==+a.length&&b.keys(a),g=(f||a).length,k=0,q;if(3>arguments.length){if(!g)throw new TypeError("Reduce of empty array with no initial value");
c=a[f?f[k++]:k++]}for(;k<g;k++)q=f?f[k]:k,c=d(c,a[q],q,a);return c};b.reduceRight=b.foldr=function(a,d,c,e){null==a&&(a=[]);d=v(d,e,4);var f=a.length!==+a.length&&b.keys(a),g=(f||a).length,k;if(3>arguments.length){if(!g)throw new TypeError("Reduce of empty array with no initial value");c=a[f?f[--g]:--g]}for(;g--;)k=f?f[g]:g,c=d(c,a[k],k,a);return c};b.find=b.detect=function(a,d,c){var e;d=b.iteratee(d,c);b.some(a,function(a,g,k){if(d(a,g,k))return e=a,!0});return e};b.filter=b.select=function(a,d,
c){var e=[];if(null==a)return e;d=b.iteratee(d,c);b.each(a,function(a,g,k){d(a,g,k)&&e.push(a)});return e};b.reject=function(a,d,c){return b.filter(a,b.negate(b.iteratee(d)),c)};b.every=b.all=function(a,d,c){if(null==a)return!0;d=b.iteratee(d,c);c=a.length!==+a.length&&b.keys(a);var e=(c||a).length,f,g;for(f=0;f<e;f++)if(g=c?c[f]:f,!d(a[g],g,a))return!1;return!0};b.some=b.any=function(a,d,c){if(null==a)return!1;d=b.iteratee(d,c);c=a.length!==+a.length&&b.keys(a);var e=(c||a).length,f,g;for(f=0;f<
e;f++)if(g=c?c[f]:f,d(a[g],g,a))return!0;return!1};b.contains=b.include=function(a,d){if(null==a)return!1;a.length!==+a.length&&(a=b.values(a));return 0<=b.indexOf(a,d)};b.invoke=function(a,d){var c=n.call(arguments,2),e=b.isFunction(d);return b.map(a,function(a){return(e?d:a[d]).apply(a,c)})};b.pluck=function(a,d){return b.map(a,b.property(d))};b.where=function(a,d){return b.filter(a,b.matches(d))};b.findWhere=function(a,d){return b.find(a,b.matches(d))};b.max=function(a,d,c){var e=-Infinity,f=-Infinity,
g;if(null==d&&null!=a){a=a.length===+a.length?a:b.values(a);for(var k=0,q=a.length;k<q;k++)c=a[k],c>e&&(e=c)}else d=b.iteratee(d,c),b.each(a,function(a,k,b){g=d(a,k,b);if(g>f||-Infinity===g&&-Infinity===e)e=a,f=g});return e};b.min=function(a,d,c){var e=Infinity,f=Infinity,g;if(null==d&&null!=a){a=a.length===+a.length?a:b.values(a);for(var k=0,q=a.length;k<q;k++)c=a[k],c<e&&(e=c)}else d=b.iteratee(d,c),b.each(a,function(a,k,b){g=d(a,k,b);if(g<f||Infinity===g&&Infinity===e)e=a,f=g});return e};b.shuffle=
function(a){a=a&&a.length===+a.length?a:b.values(a);for(var d=a.length,c=Array(d),e=0,f;e<d;e++)f=b.random(0,e),f!==e&&(c[e]=c[f]),c[f]=a[e];return c};b.sample=function(a,d,c){return null==d||c?(a.length!==+a.length&&(a=b.values(a)),a[b.random(a.length-1)]):b.shuffle(a).slice(0,Math.max(0,d))};b.sortBy=function(a,d,c){d=b.iteratee(d,c);return b.pluck(b.map(a,function(a,b,g){return{value:a,index:b,criteria:d(a,b,g)}}).sort(function(a,b){var g=a.criteria,k=b.criteria;if(g!==k){if(g>k||void 0===g)return 1;
if(g<k||void 0===k)return-1}return a.index-b.index}),"value")};var C=function(a){return function(d,c,e){var f={};c=b.iteratee(c,e);b.each(d,function(g,k){k=c(g,k,d);a(f,g,k)});return f}};b.groupBy=C(function(a,d,c){b.has(a,c)?a[c].push(d):a[c]=[d]});b.indexBy=C(function(a,b,c){a[c]=b});b.countBy=C(function(a,d,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,d,c,e){c=b.iteratee(c,e,1);d=c(d);e=0;for(var f=a.length;e<f;){var g=e+f>>>1;c(a[g])<d?e=g+1:f=g}return e};b.toArray=function(a){return a?
b.isArray(a)?n.call(a):a.length===+a.length?b.map(a,b.identity):b.values(a):[]};b.size=function(a){return null==a?0:a.length===+a.length?a.length:b.keys(a).length};b.partition=function(a,d,c){d=b.iteratee(d,c);var e=[],f=[];b.each(a,function(g,a,b){(d(g,a,b)?e:f).push(g)});return[e,f]};b.first=b.head=b.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:n.call(a,0,b)};b.initial=function(a,b,c){return n.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))};b.last=function(a,b,c){return null==
a?void 0:null==b||c?a[a.length-1]:n.call(a,Math.max(a.length-b,0))};b.rest=b.tail=b.drop=function(a,b,c){return n.call(a,null==b||c?1:b)};b.compact=function(a){return b.filter(a,b.identity)};var F=function(a,d,c,e){if(d&&b.every(a,b.isArray))return r.apply(e,a);for(var f=0,g=a.length;f<g;f++){var k=a[f];b.isArray(k)||b.isArguments(k)?d?t.apply(e,k):F(k,d,c,e):c||e.push(k)}return e};b.flatten=function(a,b){return F(a,b,!1,[])};b.without=function(a){return b.difference(a,n.call(arguments,1))};b.uniq=
b.unique=function(a,d,c,e){if(null==a)return[];b.isBoolean(d)||(e=c,c=d,d=!1);null!=c&&(c=b.iteratee(c,e));e=[];for(var f=[],g=0,k=a.length;g<k;g++){var q=a[g];if(d)g&&f===q||e.push(q),f=q;else if(c){var E=c(q,g,a);0>b.indexOf(f,E)&&(f.push(E),e.push(q))}else 0>b.indexOf(e,q)&&e.push(q)}return e};b.union=function(){return b.uniq(F(arguments,!0,!0,[]))};b.intersection=function(a){if(null==a)return[];for(var d=[],c=arguments.length,e=0,f=a.length;e<f;e++){var g=a[e];if(!b.contains(d,g)){for(var k=1;k<
c&&b.contains(arguments[k],g);k++);k===c&&d.push(g)}}return d};b.difference=function(a){var d=F(n.call(arguments,1),!0,!0,[]);return b.filter(a,function(a){return!b.contains(d,a)})};b.zip=function(a){if(null==a)return[];for(var d=b.max(arguments,"length").length,c=Array(d),e=0;e<d;e++)c[e]=b.pluck(arguments,e);return c};b.object=function(a,b){if(null==a)return{};for(var c={},e=0,f=a.length;e<f;e++)b?c[a[e]]=b[e]:c[a[e][0]]=a[e][1];return c};b.indexOf=function(a,d,c){if(null==a)return-1;var e=0,f=
a.length;if(c)if("number"==typeof c)e=0>c?Math.max(0,f+c):c;else return e=b.sortedIndex(a,d),a[e]===d?e:-1;for(;e<f;e++)if(a[e]===d)return e;return-1};b.lastIndexOf=function(a,b,c){if(null==a)return-1;var e=a.length;for("number"==typeof c&&(e=0>c?e+c+1:Math.min(e,c+1));0<=--e;)if(a[e]===b)return e;return-1};b.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=c||1;for(var e=Math.max(Math.ceil((b-a)/c),0),f=Array(e),g=0;g<e;g++,a+=c)f[g]=a;return f};var I=function(){};b.bind=function(a,d){var c,
e;if(H&&a.bind===H)return H.apply(a,n.call(arguments,1));if(!b.isFunction(a))throw new TypeError("Bind must be called on a function");c=n.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(d,c.concat(n.call(arguments)));I.prototype=a.prototype;var f=new I;I.prototype=null;var g=a.apply(f,c.concat(n.call(arguments)));return b.isObject(g)?g:f}};b.partial=function(a){var d=n.call(arguments,1);return function(){for(var c=0,e=d.slice(),f=0,g=e.length;f<g;f++)e[f]===b&&(e[f]=arguments[c++]);
for(;c<arguments.length;)e.push(arguments[c++]);return a.apply(this,e)}};b.bindAll=function(a){var d,c=arguments.length,e;if(1>=c)throw Error("bindAll must be passed function names");for(d=1;d<c;d++)e=arguments[d],a[e]=b.bind(a[e],a);return a};b.memoize=function(a,d){var c=function(e){var f=c.cache,g=d?d.apply(this,arguments):e;b.has(f,g)||(f[g]=a.apply(this,arguments));return f[g]};c.cache={};return c};b.delay=function(a,b){var c=n.call(arguments,2);return setTimeout(function(){return a.apply(null,
c)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(n.call(arguments,1)))};b.throttle=function(a,d,c){var e,f,g,k=null,q=0;c||(c={});var E=function(){q=!1===c.leading?0:b.now();k=null;g=a.apply(e,f);k||(e=f=null)};return function(){var B=b.now();q||!1!==c.leading||(q=B);var h=d-(B-q);e=this;f=arguments;0>=h||h>d?(clearTimeout(k),k=null,q=B,g=a.apply(e,f),k||(e=f=null)):k||!1===c.trailing||(k=setTimeout(E,h));return g}};b.debounce=function(a,d,c){var e,f,g,k,q,E=function(){var B=b.now()-
k;B<d&&0<B?e=setTimeout(E,d-B):(e=null,c||(q=a.apply(g,f),e||(g=f=null)))};return function(){g=this;f=arguments;k=b.now();var B=c&&!e;e||(e=setTimeout(E,d));B&&(q=a.apply(g,f),g=f=null);return q}};b.wrap=function(a,d){return b.partial(d,a)};b.negate=function(a){return function(){return!a.apply(this,arguments)}};b.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,e=a[b].apply(this,arguments);c--;)e=a[c].call(this,e);return e}};b.after=function(a,b){return function(){if(1>
--a)return b.apply(this,arguments)}};b.before=function(a,b){var c;return function(){0<--a?c=b.apply(this,arguments):b=null;return c}};b.once=b.partial(b.before,2);b.keys=function(a){if(!b.isObject(a))return[];if(z)return z(a);var d=[],c;for(c in a)b.has(a,c)&&d.push(c);return d};b.values=function(a){for(var d=b.keys(a),c=d.length,e=Array(c),f=0;f<c;f++)e[f]=a[d[f]];return e};b.pairs=function(a){for(var d=b.keys(a),c=d.length,e=Array(c),f=0;f<c;f++)e[f]=[d[f],a[d[f]]];return e};b.invert=function(a){for(var d=
{},c=b.keys(a),e=0,f=c.length;e<f;e++)d[a[c[e]]]=c[e];return d};b.functions=b.methods=function(a){var d=[],c;for(c in a)b.isFunction(a[c])&&d.push(c);return d.sort()};b.extend=function(a){if(!b.isObject(a))return a;for(var d,c,e=1,f=arguments.length;e<f;e++)for(c in d=arguments[e],d)A.call(d,c)&&(a[c]=d[c]);return a};b.pick=function(a,d,c){var e={},f;if(null==a)return e;if(b.isFunction(d))for(f in d=v(d,c),a){var g=a[f];d(g,f,a)&&(e[f]=g)}else{g=r.apply([],n.call(arguments,1));a=Object(a);for(var k=
0,q=g.length;k<q;k++)f=g[k],f in a&&(e[f]=a[f])}return e};b.omit=function(a,d,c){if(b.isFunction(d))d=b.negate(d);else{var e=b.map(r.apply([],n.call(arguments,1)),String);d=function(a,g){return!b.contains(e,g)}}return b.pick(a,d,c)};b.defaults=function(a){if(!b.isObject(a))return a;for(var d=1,c=arguments.length;d<c;d++){var e=arguments[d],f;for(f in e)void 0===a[f]&&(a[f]=e[f])}return a};b.clone=function(a){return b.isObject(a)?b.isArray(a)?a.slice():b.extend({},a):a};b.tap=function(a,b){b(a);return a};
var G=function(a,d,c,e){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return a===d;a instanceof b&&(a=a._wrapped);d instanceof b&&(d=d._wrapped);var f=w.call(a);if(f!==w.call(d))return!1;switch(f){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d}if("object"!=typeof a||"object"!=typeof d)return!1;for(var g=c.length;g--;)if(c[g]===a)return e[g]===d;
var g=a.constructor,k=d.constructor;if(g!==k&&"constructor"in a&&"constructor"in d&&!(b.isFunction(g)&&g instanceof g&&b.isFunction(k)&&k instanceof k))return!1;c.push(a);e.push(d);if("[object Array]"===f){if(f=a.length,k=f===d.length)for(;f--&&(k=G(a[f],d[f],c,e)););}else if(g=b.keys(a),f=g.length,k=b.keys(d).length===f)for(;f--&&(k=g[f],k=b.has(d,k)&&G(a[k],d[k],c,e)););c.pop();e.pop();return k};b.isEqual=function(a,b){return G(a,b,[],[])};b.isEmpty=function(a){if(null==a)return!0;if(b.isArray(a)||
b.isString(a)||b.isArguments(a))return 0===a.length;for(var d in a)if(b.has(a,d))return!1;return!0};b.isElement=function(a){return!(!a||1!==a.nodeType)};b.isArray=p||function(a){return"[object Array]"===w.call(a)};b.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};b.each("Arguments Function String Number Date RegExp".split(" "),function(a){b["is"+a]=function(b){return w.call(b)==="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return b.has(a,"callee")});
"function"!==typeof/./&&(b.isFunction=function(a){return"function"==typeof a||!1});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!==+a};b.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===w.call(a)};b.isNull=function(a){return null===a};b.isUndefined=function(a){return void 0===a};b.has=function(a,b){return null!=a&&A.call(a,b)};b.noConflict=function(){h._=y;return this};b.identity=function(a){return a};b.constant=function(a){return function(){return a}};
b.noop=function(){};b.property=function(a){return function(b){return b[a]}};b.matches=function(a){var d=b.pairs(a),c=d.length;return function(a){if(null==a)return!c;a=Object(a);for(var b=0;b<c;b++){var g=d[b],k=g[0];if(g[1]!==a[k]||!(k in a))return!1}return!0}};b.times=function(a,b,c){var e=Array(Math.max(0,a));b=v(b,c,1);for(c=0;c<a;c++)e[c]=b(c);return e};b.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};b.now=Date.now||function(){return(new Date).getTime()};
var p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},C=b.invert(p),L=function(a){var d=function(g){return a[g]},c="(?:"+b.keys(a).join("|")+")",e=RegExp(c),f=RegExp(c,"g");return function(g){g=null==g?"":""+g;return e.test(g)?g.replace(f,d):g}};b.escape=L(p);b.unescape=L(C);b.result=function(a,d){if(null!=a){var c=a[d];return b.isFunction(c)?a[d]():c}};var N=0;b.uniqueId=function(a){var b=++N+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},u=/\\|'|\r|\n|\u2028|\u2029/g,M=function(a){return"\\"+O[a]};b.template=function(a,d,c){!d&&c&&(d=c);d=b.defaults({},d,b.templateSettings);c=RegExp([(d.escape||J).source,(d.interpolate||J).source,(d.evaluate||J).source].join("|")+"|$","g");var e=0,f="__p+='";a.replace(c,function(g,b,c,d,h){f+=a.slice(e,h).replace(u,M);e=h+g.length;b?f+="'+\n((__t=("+b+"))==null?'':_.escape(__t))+\n'":
c?f+="'+\n((__t=("+c+"))==null?'':__t)+\n'":d&&(f+="';\n"+d+"\n__p+='");return g});f+="';\n";d.variable||(f="with(obj||{}){\n"+f+"}\n");f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(d.variable||"obj","_",f)}catch(k){throw k.source=f,k;}c=function(a){return g.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+f+"}";return c};b.chain=function(a){a=b(a);a._chain=!0;return a};var K=function(a){return this._chain?
b(a).chain():a};b.mixin=function(a){b.each(b.functions(a),function(d){var c=b[d]=a[d];b.prototype[d]=function(){var a=[this._wrapped];t.apply(a,arguments);return K.call(this,c.apply(b,a))}})};b.mixin(b);b.each("pop push reverse shift sort splice unshift".split(" "),function(a){var d=x[a];b.prototype[a]=function(){var b=this._wrapped;d.apply(b,arguments);"shift"!==a&&"splice"!==a||0!==b.length||delete b[0];return K.call(this,b)}});b.each(["concat","join","slice"],function(a){var d=x[a];b.prototype[a]=
function(){return K.call(this,d.apply(this._wrapped,arguments))}});b.prototype.value=function(){return this._wrapped};"function"===typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this);return m};
(function(m,l){if("function"===typeof define&&define.amd)define(["underscore","jquery","exports"],function(h,x,p){m.Backbone=l(m,p,h,x)});else if("undefined"!==typeof exports){var h=_asset_pipeline_require("backbone/underscore.js");l(m,exports,h)}else m.Backbone=l(m,{},m._,m.jQuery||m.Zepto||m.ender||m.$)})(this,function(m,l,h,y){var x=m.Backbone,p=[].slice;l.VERSION="1.1.2";l.$=y;l.noConflict=function(){m.Backbone=x;return this};l.emulateHTTP=!1;l.emulateJSON=!1;var t=l.Events={on:function(g,a,b){if(!r(this,
"on",g,[a,b])||!a)return this;this._events||(this._events={});(this._events[g]||(this._events[g]=[])).push({callback:a,context:b,ctx:b||this});return this},once:function(g,a,b){if(!r(this,"once",g,[a,b])||!a)return this;var c=this,d=h.once(function(){c.off(g,d);a.apply(this,arguments)});d._callback=a;return this.on(g,d,b)},off:function(g,a,b){var c,d,e,f,l,m,n,p;if(!this._events||!r(this,"off",g,[a,b]))return this;if(!g&&!a&&!b)return this._events=void 0,this;f=g?[g]:h.keys(this._events);l=0;for(m=
f.length;l<m;l++)if(g=f[l],e=this._events[g]){this._events[g]=c=[];if(a||b)for(n=0,p=e.length;n<p;n++)d=e[n],(a&&a!==d.callback&&a!==d.callback._callback||b&&b!==d.context)&&c.push(d);c.length||delete this._events[g]}return this},trigger:function(g){if(!this._events)return this;var a=p.call(arguments,1);if(!r(this,"trigger",g,a))return this;var b=this._events[g],c=this._events.all;b&&w(b,a);c&&w(c,arguments);return this},stopListening:function(g,a,b){var c=this._listeningTo;if(!c)return this;var d=
!a&&!b;b||"object"!==typeof a||(b=this);g&&((c={})[g._listenId]=g);for(var e in c)g=c[e],g.off(a,b,this),(d||h.isEmpty(g._events))&&delete this._listeningTo[e];return this}},n=/\s+/,r=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(n.test(c)){c=c.split(n);e=0;for(var f=c.length;e<f;e++)a[b].apply(a,[c[e]].concat(d));return!1}return!0},w=function(a,b){var c,d=-1,e=a.length,f=b[0],h=b[1],l=b[2];switch(b.length){case 0:for(;++d<e;)(c=
a[d]).callback.call(c.ctx);break;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);break;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,h);break;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,h,l);break;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}};h.each({listenTo:"on",listenToOnce:"once"},function(a,b){t[b]=function(b,k,c){var d=this._listeningTo||(this._listeningTo={}),e=b._listenId||(b._listenId=h.uniqueId("l"));d[e]=b;c||"object"!==typeof k||(c=this);b[a](k,c,this);return this}});
t.bind=t.on;t.unbind=t.off;h.extend(l,t);var A=l.Model=function(a,b){var c=a||{};b||(b={});this.cid=h.uniqueId("c");this.attributes={};b.collection&&(this.collection=b.collection);b.parse&&(c=this.parse(c,b)||{});c=h.defaults({},c,h.result(this,"defaults"));this.set(c,b);this.changed={};this.initialize.apply(this,arguments)};h.extend(A.prototype,t,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return h.clone(this.attributes)},sync:function(){return l.sync.apply(this,
arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,l,m,n,p;if(null==a)return this;"object"===typeof a?(e=a,c=b):(e={})[a]=b;c||(c={});if(!this._validate(e,c))return!1;f=c.unset;l=c.silent;a=[];m=this._changing;this._changing=!0;m||(this._previousAttributes=h.clone(this.attributes),this.changed={});p=this.attributes;n=this._previousAttributes;this.idAttribute in e&&(this.id=
e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(p[d],b)||a.push(d),h.isEqual(n[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete p[d]:p[d]=b;if(!l)for(a.length&&(this._pending=c),b=0,d=a.length;b<d;b++)this.trigger("change:"+a[b],this,p[a[b]],c);if(m)return this;if(!l)for(;this._pending;)c=this._pending,this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b=
{},c;for(c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes,e;for(e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},
fetch:function(a){a=a?h.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return!1;c&&c(b,d,a);b.trigger("sync",b,d,a)};f(this,a);return this.sync("read",this,a)},save:function(a,b,c){var d,e=this.attributes;null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;c=h.extend({validate:!0},c);if(d&&!c.wait){if(!this.set(d,c))return!1}else if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},e,d));void 0===c.parse&&(c.parse=
!0);var l=this,m=c.success;c.success=function(a){l.attributes=e;var b=l.parse(a,c);c.wait&&(b=h.extend(d||{},b));if(h.isObject(b)&&!l.set(b,c))return!1;m&&m(l,a,c);l.trigger("sync",l,a,c)};f(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=e);return a},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&d();c&&c(b,
e,a);b.isNew()||b.trigger("sync",b,e,a)};if(this.isNew())return a.success(),!1;f(this,a);var e=this.sync("delete",this,a);a.wait||d();return e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||e();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},h.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);a=this.validationError=this.validate(a,b)||null;if(!a)return!0;this.trigger("invalid",this,a,h.extend(b,{validationError:a}));return!1}});h.each("keys values pairs invert pick omit".split(" "),function(a){A.prototype[a]=function(){var b=p.call(arguments);b.unshift(this.attributes);return h[a].apply(h,b)}});var z=l.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);void 0!==
b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,h.extend({silent:!0},b))},H={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1};h.extend(z.prototype,t,{model:A,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return l.sync.apply(this,arguments)},add:function(a,c){return this.set(a,h.extend({merge:!1},c,b))},remove:function(a,b){var c=!h.isArray(a);a=c?[a]:h.clone(a);b||(b={});
var d,e,f,l;d=0;for(e=a.length;d<e;d++)if(l=a[d]=this.get(a[d]))delete this._byId[l.id],delete this._byId[l.cid],f=this.indexOf(l),this.models.splice(f,1),this.length--,b.silent||(b.index=f,l.trigger("remove",l,this,b)),this._removeReference(l,b);return c?a[0]:a},set:function(a,b){b=h.defaults({},b,H);b.parse&&(a=this.parse(a,b));var c=!h.isArray(a);a=c?a?[a]:[]:h.clone(a);var d,e,f,l,m,n,p=b.at,t=this.model,u=this.comparator&&null==p&&!1!==b.sort,x=h.isString(this.comparator)?this.comparator:null,
r=[],w=[],v={},z=b.add,C=b.merge,y=b.remove,D=!u&&z&&y?[]:!1;d=0;for(e=a.length;d<e;d++){m=a[d]||{};f=m instanceof A?l=m:m[t.prototype.idAttribute||"id"];if(f=this.get(f))y&&(v[f.cid]=!0),C&&(m=m===l?l.attributes:m,b.parse&&(m=f.parse(m,b)),f.set(m,b),u&&!n&&f.hasChanged(x)&&(n=!0)),a[d]=f;else if(z){l=a[d]=this._prepareModel(m,b);if(!l)continue;r.push(l);this._addReference(l,b)}l=f||l;!D||!l.isNew()&&v[l.id]||D.push(l);v[l.id]=!0}if(y){d=0;for(e=this.length;d<e;++d)v[(l=this.models[d]).cid]||w.push(l);
w.length&&this.remove(w,b)}if(r.length||D&&D.length)if(u&&(n=!0),this.length+=r.length,null!=p)for(d=0,e=r.length;d<e;d++)this.models.splice(p+d,0,r[d]);else for(D&&(this.models.length=0),m=D||r,d=0,e=m.length;d<e;d++)this.models.push(m[d]);n&&this.sort({silent:!0});if(!b.silent){d=0;for(e=r.length;d<e;d++)(l=r[d]).trigger("add",l,this,b);(n||D&&D.length)&&this.trigger("sort",this,b)}return c?a[0]:a},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c],
b);b.previousModels=this.models;this._reset();a=this.add(a,h.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,h.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,h.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return p.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,
this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};f(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?h.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(a,g){b.wait&&c.add(a,
b);d&&d(a,g,b)};a.save(null,b);return a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof A)return a;b=b?h.clone(b):{};b.collection=this;a=new this.model(a,b);if(!a.validationError)return a;this.trigger("invalid",this,a.validationError,b);return!1},_addReference:function(a,b){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if("add"!==a&&"remove"!==a||c===this)"destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});h.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(a){z.prototype[a]=function(){var b=p.call(arguments);b.unshift(this.models);return h[a].apply(h,b)}});h.each(["groupBy","countBy","sortBy","indexBy"],function(a){z.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});y=l.View=function(a){this.cid=h.uniqueId("view");a||(a={});h.extend(this,h.pick(a,C));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var v=/^(\S+)\s*(.*)$/,C="model collection el id attributes className tagName events".split(" ");
h.extend(y.prototype,t,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof l.$?a:l.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];h.isFunction(c)||
(c=this[a[b]]);if(c){var d=b.match(v),e=d[1],d=d[2],c=h.bind(c,this),e=e+(".delegateEvents"+this.cid);if(""===d)this.$el.on(e,c);else this.$el.on(e,d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var a=h.extend({},h.result(this,"attributes"));this.id&&(a.id=h.result(this,"id"));this.className&&(a["class"]=h.result(this,"className"));a=l.$("<"+h.result(this,"tagName")+
">").attr(a);this.setElement(a,!1)}}});l.sync=function(a,b,c){var d=I[a];h.defaults(c||(c={}),{emulateHTTP:l.emulateHTTP,emulateJSON:l.emulateJSON});var f={type:d,dataType:"json"};c.url||(f.url=h.result(b,"url")||e());null!=c.data||!b||"create"!==a&&"update"!==a&&"patch"!==a||(f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c)));c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(c.emulateHTTP&&("PUT"===d||"DELETE"===d||"PATCH"===
d)){f.type="POST";c.emulateJSON&&(f.data._method=d);var m=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(m)return m.apply(this,arguments)}}"GET"===f.type||c.emulateJSON||(f.processData=!1);"PATCH"===f.type&&F&&(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=c.xhr=l.ajax(h.extend(f,c));b.trigger("request",b,a,c);return a};var F="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
I={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};l.ajax=function(){return l.$.ajax.apply(l.$,arguments)};var G=l.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},L=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,J=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(G.prototype,t,{initialize:function(){},route:function(a,b,c){h.isRegExp(a)||(a=this._routeToRegExp(a));h.isFunction(b)&&(c=b,b="");c||(c=this[b]);var d=this;l.history.route(a,
function(e){e=d._extractParameters(a,e);d.execute(c,e);d.trigger.apply(d,["route:"+b].concat(e));d.trigger("route",b,e);l.history.trigger("route",d,b,e)});return this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,b){l.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(O,"\\$&").replace(L,"(?:$1)?").replace(N,
function(a,b){return b?a:"([^/?]+)"}).replace(J,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a,b){return b===c.length-1?a||null:a?decodeURIComponent(a):null})}});var u=l.History=function(){this.handlers=[];h.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,K=/^\/+|\/+$/g,a=/msie [\w.]+/,d=/\/$/,c=/#.*$/;u.started=!1;h.extend(u.prototype,
t,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){null==a&&(this._hasPushState||!this._wantsHashChange||b?(a=decodeURI(this.location.pathname+this.location.search),b=this.root.replace(d,""),a.indexOf(b)||(a=a.slice(b.length))):a=this.getHash());return a.replace(M,"")},start:function(b){if(u.started)throw Error("Backbone.history has already been started");
u.started=!0;this.options=h.extend({root:"/"},this.options,b);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);b=this.getFragment();var c=document.documentMode,c=a.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c);this.root=("/"+this.root+"/").replace(K,"/");c&&this._wantsHashChange&&(this.iframe=l.$('<iframe src="javascript:0" tabindex="-1">').hide().appendTo("body")[0].contentWindow,
this.navigate(b));if(this._hasPushState)l.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!c)l.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=b;b=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
this.atRoot()&&b.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){l.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);u.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return h.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!u.started)return!1;b&&!0!==b||(b={trigger:!!b});var d=this.root+(a=this.getFragment(a||""));a=a.replace(c,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==d&&(d=d.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,d);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(d);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});l.history=new u;A.extend=z.extend=G.extend=y.extend=u.extend=function(a,
b){var c=this,d;d=a&&h.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)};h.extend(d,c,b);b=function(){this.constructor=d};b.prototype=c.prototype;d.prototype=new b;a&&h.extend(d.prototype,a);d.__super__=c.prototype;return d};var e=function(){throw Error('A "url" property or function must be specified');},f=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}};return l});