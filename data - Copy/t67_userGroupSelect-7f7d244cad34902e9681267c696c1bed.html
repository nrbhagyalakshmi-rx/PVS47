function bindShareWith(a,d,f,b,e){a.select2({tags:e,minimumInputLength:0,multiple:!1,placeholder:"Select Assigned To",allowClear:!0,width:"100%",ajax:{quietMillis:250,dataType:"json",url:d,data:function(b){return{term:b.term,max:b.page||10,lang:userLocale}},processResults:function(b,a){a.page=a.page||10;return{results:b,pagination:{more:10*a.page<b.length}}}}});b&&(d=new Option(b.name,b.id,!0,!0),a.append(d).trigger("change"))}
function bindShareWith2WithData(a,d,f){a.select2({minimumInputLength:0,multiple:!0,placeholder:"Select Shared With",allowClear:!0,width:"100%",separator:";",ajax:{quietMillis:250,dataType:"json",url:d,data:function(b){return{term:b.term,max:b.page||10,lang:userLocale}},processResults:function(b,a){a.page=a.page||10;return{results:b,pagination:{more:10*a.page<b.length}}}},escapeMarkup:function(b){return b}});f&&$.each(f,function(b,d){b=new Option(d.name,d.id,!0,!0);a.append(b).trigger("change")})}
function setDataInSelect2(a){a=new Option(a.value,a.key,!0,!0);selector.append(a).trigger("change")}var signal=signal||{};
signal.user_group_utils=function(){var a=function(b,a,c){b.select2({minimumInputLength:0,multiple:!1,placeholder:"Select Assigned To",allowClear:!0,width:"100%",ajax:{quietMillis:250,dataType:"json",url:a,data:function(a){return{term:a.term,max:a.page||10,lang:userLocale}},processResults:function(a,b){b.page=b.page||10;return{results:a,pagination:{more:10*b.page<a.length}}}}});c&&(a=new Option(c.name,c.id,!0,!0),b.append(a).trigger("change"))},d,f,b,e,h=function(a,b){var c=new Set;if(b){var k;k=$("#detailed-view-checkbox").is(":checked")?
"table#alertsDetailsTable .copy-select:checked":"table.DTFC_Cloned .copy-select:checked";$.each($(k),function(){var a=$(this).closest("tr").index();isAbstractViewOrCaseView(a)&&(a=a/2*7);c.add(a)})}$.ajax({url:assignToGroupUrl,dataType:"json",data:{assignedToValue:d.id,selectedId:a},beforeSend:function(){b&&c.forEach(function(a){$("table#alertsDetailsTable tbody tr:nth("+a+") select.assignedToSelect").siblings("i.assignToProcessing").show()})},success:function(a){a.status?($.Notification.notify("success",
"top right","Success",a.message,{autoHideDelay:2E3}),b&&c.forEach(function(a){var b=new Option(d.text,d.id.split("_")[1],!0,!0);$("table#alertsDetailsTable tbody tr:nth("+a+") select.assignedToSelect").append(b).trigger("change")}),$("i.assignToProcessing").hide()):$.Notification.notify("error","top right","Error",a.message,{autoHideDelay:2E3})}})},l=function(d,g){var c;switch(applicationName){case "Single Case Alert":c="Case";break;case "Aggregate Case Alert":c="PEC";break;case "EVDAS Alert":c="PEC";
break;case "Ad-Hoc Alert":c="Observation";break;case "Literature Search Alert":c="Article"}bootbox.dialog({title:"Apply To All",message:signal.utils.render("bulk_operation_options",{totalSelectedRecords:d,alertType:c}),buttons:{ok:{label:"Ok",className:"btn btn-primary",callback:function(){switch($("input[name=bulkOptions]:checked").val()){case "current":var a=table.rows(g).data()[0];$("table#alertsDetailsTable tbody tr:nth("+g+") select.assignedToSelect").siblings("i.assignToProcessing").show();
h(JSON.stringify([a.id]),!1);break;case "allSelected":a=m(),h(JSON.stringify(a),!0)}}},cancel:{label:"Cancel",className:"btn btn-default",callback:function(){$("table#alertsDetailsTable tbody tr:nth("+g+") select.assignedToSelect").next().remove();$("table#alertsDetailsTable tbody tr:nth("+g+") select.assignedToSelect").replaceWith(b);a($("table#alertsDetailsTable tbody tr:nth("+g+") select.assignedToSelect"),searchUserGroupListUrl,{name:e[0].text,id:e[0].id})}}}})},m=function(){var a=[],b=new Set,
c;c=$("#detailed-view-checkbox").is(":checked")?"table#alertsDetailsTable .copy-select:checked":"table.DTFC_Cloned .copy-select:checked";$.each($(c),function(){var a=$(this).closest("tr").index();isAbstractViewOrCaseView(a)&&(a/=2);b.add(a)});b.forEach(function(b){a.push(table.rows(b).data()[0].id)});return a};return{bind_assign_to:a,bind_assignTo_to_grid_row:function(b,d,c){a(b.find(".assignedToSelect"),d,c)},bind_assignTo_selection:function(a,g){$(document).on("select2:opening",".assignedToSelect",
function(a){b=$(a.target).clone();e=$(this).select2("data")});$(document).on("select2:selecting",".assignedToSelect",function(a){var b,e;f=$(this).closest("tr").index();$("#detailed-view-checkbox").is(":checked")?(b=$("table#alertsDetailsTable .copy-select:checked").length,e=$(this).closest("tr").find(".copy-select").prop("checked")):(b=$("table.DTFC_Cloned .copy-select:checked").length,e=$("table.DTFC_Cloned tbody tr:nth("+f+") .copy-select").prop("checked"));d=a.params.args.data;1<b&&e?l(b,f):($(this).siblings("i.assignToProcessing").show(),
a=g.row($(this).closest("tr")).data(),h(JSON.stringify([a.id]),!1))})}}}();